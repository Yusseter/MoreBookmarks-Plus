# Tags:
# rank_headgear: any headgear that signifies a certain title. crowns, pope hat etc.

headgear_base = {

	usage = game
	selection_behavior = weighted_random
	priority = 1

	##########################################################################
	####No headgear on the children
	##########################################################################
	no_headgear_children = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 }
			}
			accessory = {
				mode = add
		
				gene = headgear
				template = no_headgear
				range = { 0 1 }
			}			
		}
		weight = {
			base = 0
			modifier = { #
				add = 201
				age < 16
				
			}
		}
	}

	## SP4 Crowns of the World ## 

	sp4_mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp4_mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
            modifier = {
                add = 30
                has_sp4_dlc_trigger = yes    
                portrait_royalty_trigger = {
                    CULTURE_INPUT = mena
                }           
            }
			modifier = {
                add = 30
                has_sp4_dlc_trigger = yes    
                portrait_royalty_trigger = {
                    CULTURE_INPUT = mena
                }
				is_female = yes           
            }
            modifier = {
                add = 60
                has_sp4_dlc_trigger = yes    
                portrait_royalty_trigger = {
                    CULTURE_INPUT = turkic
                }           
            }
			modifier = {
                add = 60
                has_sp4_dlc_trigger = yes    
                portrait_royalty_trigger = {
                    CULTURE_INPUT = turkic
                }  
				is_female = yes         
            }
            modifier = {
                factor = 0 # Should NOT show up if we're not in the right era
                OR = {
                    portrait_era1_trigger = yes   
                    portrait_era2_trigger = yes   
                }            
            }
		}
	}

	sp4_rus_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp4_rus_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
            modifier = {
                add = 100
                has_sp4_dlc_trigger = yes    
                portrait_royalty_trigger = {
                    CULTURE_INPUT = rus
                }           
            }
			modifier = {
				add = 100
				has_sp4_dlc_trigger = yes    
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_east_slav
                }
			}
            modifier = {
                add = -50
                has_pol_dlc_trigger = yes    
                portrait_royalty_trigger = {
                    CULTURE_INPUT = west_slavic
                }         
            }
		}
	}

	sp4_western_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp4_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
            modifier = {
                add = 50
                has_sp4_dlc_trigger = yes    
                portrait_royalty_trigger = {
                    CULTURE_INPUT = western
                }           
            }
			modifier = {
                add = 50
                has_sp4_dlc_trigger = yes    
                portrait_royalty_trigger = {
                    CULTURE_INPUT = western
                } 
				is_female = yes          
            }
			modifier = {
				add = 50
				has_sp4_dlc_trigger = yes    
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_english 
                }
				is_female = yes
			}
            modifier = {
                factor = 0 # Should NOT show up if we're not in the right era
                OR = {
                    portrait_era1_trigger = yes   
                    portrait_era2_trigger = yes   
                }            
            }
		}
	}


## SP3 ## 

	sp3_western_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp3_western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				is_female = yes				
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = french
				}
				has_dlc_feature = couture_of_the_capets
				portrait_era3_trigger = yes 
			}
			modifier = {
				add = 50
				is_female = yes				
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = french 
                }
                has_dlc_feature = couture_of_the_capets
                OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
			}
		}
	}
	

	sp3_western_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp3_western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = french 
                }
                has_dlc_feature = couture_of_the_capets
                OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes 
                }
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}				
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }					
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = french 
                }
                has_dlc_feature = couture_of_the_capets
                OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes 
                }
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }				
				is_female = yes				
			}			
		}
	}

	
	sp3_western_royalty_era3 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp3_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = french 
                }
				has_dlc_feature = couture_of_the_capets
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = french 
                }
				has_dlc_feature = couture_of_the_capets
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                } 
				is_female = yes				 
			}			
		}
	}	

## SP2 ## 
	
	sp2_western_imperial_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp2_western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 90
				has_dlc_feature = elegance_of_the_empire
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = western
					}						
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_east_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_gaelic
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_balto_finnic
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = french
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
			}
			modifier = {
				add = 90
				has_dlc_feature = elegance_of_the_empire
				OR = {
					portrait_royalty_trigger = {
						CULTURE_INPUT = western
					}	
					portrait_imperial_trigger = {
						CULTURE_INPUT = western
					}					
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_east_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_east_slav
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_gaelic
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_gaelic
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_balto_finnic
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_balto_finnic
                    }
				}					
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}		
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = french
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				is_female = yes
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
					portrait_era1_trigger = yes 
                }  
            }
		}
	}

	sp2_western_imperial_era2 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp2_western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 90
				has_dlc_feature = elegance_of_the_empire
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = western
					}
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_east_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_balto_finnic
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_gaelic
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				
			}
			modifier = {
				add = 90
				has_dlc_feature = elegance_of_the_empire
				OR = {
					portrait_royalty_trigger = {
						CULTURE_INPUT = western
					}	
					portrait_imperial_trigger = {
						CULTURE_INPUT = western
					}	
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_east_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_east_slav
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_balto_finnic
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_balto_finnic
                    }
				}				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_gaelic
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_gaelic
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				is_female = yes
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
                	portrait_era2_trigger = yes 
                }  
            }
		}
	}

	sp2_western_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp2_western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				has_dlc_feature = elegance_of_the_empire
				portrait_high_nobles_headgear_trigger = {
					CULTURE_INPUT = western
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
			}
			modifier = {
				factor = 0
				has_ep2_dlc_trigger = yes
				NOR = {
					portrait_era2_trigger = yes 
					portrait_era3_trigger = yes
				}
			}
		}
	}


## DDE HRE ##

	dde_hre_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {  
                    CULTURE_INPUT = dde_hre # CULTURE_INPUT gets added into the trigger referenced in 00_clothing_triggers.txt so it's important the input is a correct match to an existing culture trigger
                }
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes   
                NOR = { 
                	portrait_era3_trigger = yes 
                	portrait_era4_trigger = yes 
                } 
            }
		}
	}

	dde_hre_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = dde_hre } # common/scripted_modifiers/00_portrait_modifiers.txt
			modifier = {
				add = 50
				portrait_low_nobles_clothing_trigger = {
					CULTURE_INPUT = dde_hre
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes   
                NOR = { 
                	portrait_era3_trigger = yes 
                	portrait_era4_trigger = yes 
                } 
            }
		}
	}

	dde_hre_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_high_nobles_headgear_trigger = {
					CULTURE_INPUT = dde_hre
				}	
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes   
                NOR = { 
                	portrait_era3_trigger = yes 
                	portrait_era4_trigger = yes 
                } 
            }
		}
	}

	dde_hre_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = dde_hre
				}	
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes   
                NOR = { 
                	portrait_era3_trigger = yes 
                	portrait_era4_trigger = yes 
                } 
            }
		}
	}

	# Reichskrone
	dde_hre_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_hre_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 100 # always pick the HRE crown over the western one
				portrait_reichskrone_trigger = yes
			}
		}
	}

## Western ##

	western_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = western
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 20
				portrait_commoner_clothing_trigger = {
					CULTURE_INPUT = western
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

    ep2_western_era1_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = ep2_western_era1_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = western
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_english
                    }
				}				
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = western
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_english
                    }
				}				
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes   
                portrait_era1_trigger = yes     
            }
        }
    }

    ep2_western_era2_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = western_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = western
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
				has_ep2_dlc_trigger = yes 
				portrait_era2_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = western
                } 
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
                has_ep2_dlc_trigger = yes   
                portrait_era2_trigger = yes     
            }
        }
    }

    ep2_western_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = ep2_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = western
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
				has_ep2_dlc_trigger = yes 
				portrait_era3_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = western
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
                has_ep2_dlc_trigger = yes   
                portrait_era3_trigger = yes     
            }
        }
    }

    fp4_western_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = fp4_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = western
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				portrait_era3_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = western
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                portrait_era3_trigger = yes     
            }
        }
    }

	western_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = western
		        }
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
		        has_ep2_dlc_trigger = yes 
		        portrait_era1_trigger = yes 
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep2_western_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = western
		        }
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_english
                    }
				}				
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
		        has_ep2_dlc_trigger = yes 
		        portrait_era1_trigger = yes 
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_english
                    }
				}				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}	
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

	ep2_western_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = western
		        }
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
		        has_ep2_dlc_trigger = yes 
		        portrait_era2_trigger = yes 
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
			}
		}
	}

	ep2_western_era3_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era3_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = western
		        }
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
		        has_ep2_dlc_trigger = yes 
		        portrait_era3_trigger = yes 
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                OR = {
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }
			}
		}
	}

	fp4_western_era3_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp4_western_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = western
		        }
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
		        has_ce1_dlc_trigger = yes
                OR = {
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ce1_dlc_trigger = yes
                OR = {
                	portrait_era3_trigger = yes  
                	portrait_era4_trigger = yes  
                }
			}
		}
	}

	western_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep2_western_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_english
                    }
				}				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

	ep2_western_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes 
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }				
			}

			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes 	
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }				
			}

		}
	}

	ep2_western_era3_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era3_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }				
                OR = {
					portrait_era3_trigger = yes  
                }
			}

			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }				
                OR = {
					portrait_era3_trigger = yes  
                }
				is_female = yes 				
			}

		}
	}

	ep2_western_era4_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era3_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes			
                OR = {
					portrait_era4_trigger = yes  
                }
			}

			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes			
                OR = {
					portrait_era4_trigger = yes  
                }
				is_female = yes 				
			}

		}
	}
	
	western_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}	
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep2_western_era2_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}	
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes 
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}				
			}

			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}	
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes 	
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}				
			}

		}
	}

	ep2_western_era3_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}				
                OR = {
					portrait_era3_trigger = yes  
                }
			}

			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}				
                OR = {
					portrait_era3_trigger = yes  
                }
				is_female = yes 				
			}

		}
	}
	
	ep2_sp3_western_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sp3_western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_dlc_feature = couture_of_the_capets
                OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes 
                }
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}				
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }					
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_dlc_feature = couture_of_the_capets
                OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes 
                }
                OR = {
					AND = {
						is_independent_ruler = no    
						prestige_level <= 4
					}
					AND = {
						is_independent_ruler = yes    
						prestige_level <= 3
					} 				
                }				
				is_female = yes				
			}			
		}
	}	

	

	western_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = western 
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep1_western_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = western 
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
                	portrait_era2_trigger = yes  
                }  
            }
		}
	}

	ep1_western_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = western 
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
                	portrait_era1_trigger = yes
                }  
            }
		}
	}

	ep2_western_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_english
                    }
				}				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

	ep2_western_era2_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
			}
			modifier = {
				factor = 0
				has_ce1_dlc_trigger = yes
			}
		}
	}

	ep2_western_era3_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_era3_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
                has_ep2_dlc_trigger = yes
                OR = {
                	portrait_era3_trigger = yes
                	portrait_era4_trigger = yes
                }  
			}
		}
	}

	ep1_italian_royalty = { # The Iron Crown of Lombardy
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_italian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = western 
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
				culture = {
					has_cultural_pillar = heritage_latin
				}
				has_ep1_dlc_trigger = yes
			}
		}
	}

	fp4_western_era2_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp4_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
                has_ce1_dlc_trigger = yes
                portrait_era2_trigger = yes  
			}
		}
	}

	western_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = western 
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = northern 
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_east_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_balto_finnic
                    }
				}					
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_gaelic
                    }
				}	
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep2_western_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 100
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = western 
                }
				portrait_imperial_trigger = {  
                    CULTURE_INPUT = french
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_english
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 100
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = western 
                }
				portrait_imperial_trigger = {  
                    CULTURE_INPUT = french
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_english
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				is_female = yes					
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  	
			}
		}
	}

	ep2_western_era2_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
			
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_brythonic
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                OR = {
                	portrait_era2_trigger = yes
                	portrait_era3_trigger = yes
                }  
			}

		}
	}

	ep2_western_era4_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = western 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                has_ep2_dlc_trigger = yes
                OR = {
                	portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 85
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_east_slav
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_balto_finnic
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_gaelic
                    }
				}				
                has_ep2_dlc_trigger = yes
                OR = {
                	portrait_era4_trigger = yes
                }  
			}
		}
	}

	#RTT headgear
	monarchs_journey_late_unlock = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = monarchs_journey_unleashed
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}

		weight = {
			base = 0
			modifier = {
				add = 10
				current_date >= 1300.1.1
				OR = {
					portrait_western_clothing_trigger = yes
					portrait_western_clothing_spouse_trigger = yes
				}
				OR = {
					AND = {
						is_lowborn = no
						is_female = yes
					}
					AND = {
						government_has_flag = government_is_republic
						highest_held_title_tier <= tier_barony
					}
				}
				trigger_if = {
					limit = {
						is_ruler = yes
					}
					primary_title.tier <= tier_duchy
				}
			}
			modifier = {
				add = 30
				portrait_era4_trigger = yes
                portrait_low_nobles_trigger = {
                    CULTURE_INPUT = western
                }
			}
		}
	}

## Byzantine ##

	byzantine_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0 0.38 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = byzantine
                }
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = byzantine
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_byzantine_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0 0.59 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = byzantine
                }
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
				has_ep3_dlc_trigger = yes 
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = byzantine
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
				has_ep3_dlc_trigger = yes 
			}
		}
	}

	byzantine_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility
				range = { 0 0.15 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = byzantine } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = byzantine 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_byzantine_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility 
				range = { 0 0.17 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = byzantine
		        }
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}					
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
		        has_ep3_dlc_trigger = yes 
		        portrait_era1_trigger = yes 
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = byzantine 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

	ep3_byzantine_era1_bare_headed_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear 
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 25
		        has_ep3_dlc_trigger = yes 
		        portrait_era1_trigger = yes
				is_independent_ruler = no 
		        OR = {
	                portrait_low_nobles_clothing_trigger = {  
	                    CULTURE_INPUT = byzantine 
	                }
		        }
		        NOR = {
	                portrait_royalty_trigger = {  
	                    CULTURE_INPUT = byzantine 
	                }	
	                portrait_imperial_trigger = {  
	                    CULTURE_INPUT = byzantine 
	                }	        
		        }
		    }
			
		    modifier = {
		        add = 40
		        has_ep3_dlc_trigger = yes 
		        portrait_era1_trigger = yes 
                portrait_commoner_clothing_trigger = {  
                    CULTURE_INPUT = byzantine 
                }
		    }
		}
	}


	ep3_byzantine_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility 
				range = { 0.21 0.42 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = byzantine
		        }
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}					
				NOT = {
					court_fashion_level_4_headgear_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}					
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = byzantine 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}					
                has_ep3_dlc_trigger = yes
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	byzantine_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility
				range = { 0 0.11 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = byzantine
                }  
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}					
			}
            modifier = {
                factor = 0 
                has_ep3_dlc_trigger = yes    
            }
		}
	}

	ep3_byzantine_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility 
				range = { 0 0.15 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 10
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = byzantine
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
		        has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes 
			}
		}
	}

	ep3_byzantine_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility 
				range = { 0.19 0.51 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = byzantine
                } 
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	byzantine_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_royalty
				range = { 0 0.04 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = byzantine
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_byzantine_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_royalty
				range = { 0.07 0.11 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = byzantine 
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

    ep3_byzantine_era2_royalty = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = byzantine_royalty
                range = { 0.14 0.45 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_royalty_trigger = { 
                    CULTURE_INPUT = byzantine
                } 
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }

	byzantine_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0.21 0.38 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
                    CULTURE_INPUT = byzantine 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
            }
		}
	}

	ep1_byzantine_imperial = { # Crown of Justinian
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_byzantine_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = byzantine 
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
			}
			modifier = {
				factor = 0
				NOT = {
					has_title = title:e_byzantium
				}
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes 
                }
            }
			modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
                OR = {
					portrait_era1_trigger = yes
					portrait_era2_trigger = yes 
                }
            }
		}
	}

	ep3_byzantine_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0 0.18 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = byzantine 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}				
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

    ep3_byzantine_era2_imperial = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = byzantine_imperial
                range = { 0.21 0.46 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_imperial_trigger = { 
                    CULTURE_INPUT = byzantine
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_armenian
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_georgian
                    }
				}	
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                    }
				}                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }

## INDIAN ##

	indian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = indian
                }
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
				portrait_jester_trigger = {  
                    CULTURE_INPUT = indian 
                }
			}
			modifier = {
				add = 20
				portrait_commoner_clothing_trigger = {  
                    CULTURE_INPUT = indian 
                }
			}
		}
	}

	indian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = indian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = indian 
                }
			}
		}
	}

	indian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = indian
                }   
			}
		}
	}

	indian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = indian
                }   
			}
		}
	}

	ep1_indian_royalty = { 
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_indian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_royalty_trigger = {
					CULTURE_INPUT = indian
				}
				culture = {
					has_cultural_pillar = heritage_burman
				}
				has_ep1_dlc_trigger = yes
			}
		}
	}

	indian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = indian 
                }
			}
		}
	}

	ep1_indian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_indian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
                portrait_imperial_trigger = {
                    CULTURE_INPUT = indian 
                }
				culture = {
					has_cultural_pillar = heritage_burman
				}
				has_ep1_dlc_trigger = yes
			}
		}
	}

## MENA ##

	mena_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = mena
                }
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = dde_abbasid                 }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_baranis                 }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_butr
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = mena 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = mena
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = dde_abbasid
					}
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_baranis                 }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_butr
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
			}
		}
	}

	mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = mena
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = dde_abbasid
					}
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_baranis                 }
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_butr
                    }
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
			}
		}
	}

	mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = mena } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = mena
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = dde_abbasid
					}
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_baranis                 }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_butr
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = mena
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = dde_abbasid
					}
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_baranis                 }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_butr
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				is_female = yes				
			}
		}
	}

	mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = mena
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = dde_abbasid
					}
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_baranis                 }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_butr
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = mena
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = dde_abbasid
					}
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_baranis                 }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_butr
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				is_female = yes				
			}
		}
	}

	mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = mena
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = dde_abbasid
					}
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_baranis                 }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_butr
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = mena
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = dde_abbasid
					}
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_baranis                 }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_butr
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				is_female = yes				
			}
		}
	}

	ep1_mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 100
                portrait_royalty_trigger = {
                    CULTURE_INPUT = mena 
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}				
				culture = {
					has_cultural_pillar = heritage_east_african
				}
				religion = religion:islam_religion
				has_ep1_dlc_trigger = yes
				is_female = no
			}
		}
	}

	mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
                portrait_imperial_trigger = {
                    CULTURE_INPUT = mena 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = dde_abbasid
					}
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_baranis                 }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_butr
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
			}
			modifier = {
				add = 51
                portrait_imperial_trigger = {
                    CULTURE_INPUT = mena 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = dde_abbasid
					}
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp3_iranian
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_baranis                 }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_butr
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				is_female = yes				
			}
		}
	}


## DDE ABBASID ##

	dde_abbasid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_common
				range = { 0.57 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				has_dde_abbasid_flavor_dlc_trigger = yes
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
			}
		}
	}

	dde_abbasid_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0.77 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
			}
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }	
				is_female = yes	
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
			}
		}
	}	
	
	dde_abbasid_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0.77 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = dde_abbasid } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes	
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
			}
		}
	}

	dde_abbasid_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0.39 0.55 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				has_dde_abbasid_flavor_dlc_trigger = yes	
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				has_dde_abbasid_flavor_dlc_trigger = yes
				is_female = yes					
			}
		}
	}

	dde_abbasid_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_royalty
				range = { 0.64 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				has_dde_abbasid_flavor_dlc_trigger = yes				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				has_dde_abbasid_flavor_dlc_trigger = yes
				is_female = yes					
			}
		}
	}

	dde_abbasid_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over mena
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				has_dde_abbasid_flavor_dlc_trigger = yes				
			}
			modifier = {
				add = 100 # pick over mena
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
				has_dde_abbasid_flavor_dlc_trigger = yes
				is_female = yes				
			}
		}
	}


####################################################################################################
##################
###ABBASID Expanded
##################
####################################################################################################
##################Early Abbassid 

	early_abbasid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_common
				range = { 0 0.54 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                portrait_era1_trigger = yes 				
			}
		}
	}
	
	early_abbasid_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0.56 0.74 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
                portrait_era1_trigger = yes		
				is_female = yes		
			}
		}
	}	
	
	early_abbasid_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0.56 0.74 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = dde_abbasid } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}					
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                portrait_era1_trigger = yes
				is_female = yes				
			}
		}
	}
	
	early_abbasid_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0 0.37 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                portrait_era1_trigger = yes 
				is_female = yes					
			}
		}
	}

	early_abbasid_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_royalty
				range = { 0 0.61 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                portrait_era1_trigger = yes 
				has_dde_abbasid_flavor_dlc_trigger = yes				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                portrait_era1_trigger = yes 
				has_dde_abbasid_flavor_dlc_trigger = yes	
				is_female = yes				
			}
		}
	}
	
	early_abbasid_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over mena
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                portrait_era1_trigger = yes 
				has_dde_abbasid_flavor_dlc_trigger = yes				
			}
			modifier = {
				add = 100 # pick over mena
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = fp2_iberian_muslim
                    }
				}				
                portrait_era1_trigger = yes 
				has_dde_abbasid_flavor_dlc_trigger = yes	
				is_female = yes			
			}
		}
	}	

####################################################################################################
##################
###ABBASID Andalusian Era1
##################
####################################################################################################
##################Early Abbassid 

	andalusian_abbasid_commoners_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_common
				range = { 0 0.54 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101
				is_female = no  ##Male only
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = fp2_iberian_muslim
                }				
                portrait_era1_trigger = yes 				
			}
		}
	}
	
	andalusian_abbasid_mayors_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0.56 0.74 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				is_female = no  ##Male only				
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = fp2_iberian_muslim
				}
                portrait_era1_trigger = yes				
			}
		}
	}	
	
	andalusian_abbasid_low_nobles_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0.56 0.74 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = fp2_iberian_muslim } 
			modifier = {
				add = 101
				is_female = no  ##Male only				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = fp2_iberian_muslim
                }
                portrait_era1_trigger = yes				
			}
		}
	}
	
	andalusian_abbasid_high_nobles_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0 0.37 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101
				is_female = no  ##Male only				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = fp2_iberian_muslim
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 100
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = fp2_iberian_muslim
                }
                portrait_era1_trigger = yes 
				is_female = yes					
			}
		}
	}

	
##################Early Abbassid Non DLC 

	non_dlc_early_abbasid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = dde_abbasid 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
		}
	}

	non_dlc_early_abbasid_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
                portrait_era1_trigger = yes	
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
		}
	}

	non_dlc_early_abbasid_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = dde_abbasid } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes				
			}
		}
	}

	non_dlc_early_abbasid_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                } 
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                } 
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes			
			}
		}
	}

	non_dlc_early_abbasid_mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes			
			}
		}
	}

	non_dlc_early_abbasid_mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                portrait_era1_trigger = yes
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes				
			}
		}
	}

##################Abbassid Non DLC 

	non_dlc_abbasid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = dde_abbasid 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
		}
	}

	non_dlc_abbasid_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = dde_abbasid
				}
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes				
			}
		}
	}

	non_dlc_abbasid_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = dde_abbasid } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes				
			}
		}
	}

	non_dlc_abbasid_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                } 
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = dde_abbasid
                } 
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes				
			}
		}
	}

	non_dlc_abbasid_mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = dde_abbasid
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes				
			}
		}
	}

	non_dlc_abbasid_mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = dde_abbasid 
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
                NOT = {
					has_dde_abbasid_flavor_dlc_trigger = yes
                }
				is_female = yes				
			}
		}
	}

## Steppe ##

	steppe_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = steppe
                }
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}				
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = steppe 
                }
				NOR = {
					portrait_western_clothing_trigger = yes
					portrait_byzantine_clothing_trigger = yes
					portrait_northern_clothing_trigger = yes
				}
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {  
                    CULTURE_INPUT = steppe 
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}				
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}				
			}
		}
	}

	steppe_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = steppe } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = steppe
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}				
			}
		}
	}

	steppe_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = steppe
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}				
			}
		}
	}

	steppe_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = steppe
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = steppe
					}   
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}				
			}
			modifier = {
				add = -100
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = steppe
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = steppe
					}
				}
				has_mpo_dlc_trigger = yes				
				OR = {
					culture = culture:khitan
					culture = {
						any_parent_culture_or_above = {
							this = culture:khitan
						}
					}
				}
			}			
		}
	}

	ep1_steppe_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_steppe_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_eastern_turk
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_eastern_turk
					} 

					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_seljuk
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_seljuk
					} 					
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}				
			}

			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
		}
	}
	

	####################################################################################################
##################
###Steppe mpo_mongol DLC
##################
####################################################################################################


	mpo_mongol_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_commoner
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {  
                    CULTURE_INPUT = steppe 
                }
				has_mpo_dlc_trigger = yes

				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}				
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}				
			}
		}
	}

	mpo_mongol_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = steppe } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = steppe
                }
				has_mpo_dlc_trigger = yes
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}				
			}
		}
	}

	mpo_mongol_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = steppe
                }
				is_female = yes
				has_mpo_dlc_trigger = yes
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}				
			}
		}
	}
	
	mpo_mongol_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = steppe
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = steppe
					}   
				}
				has_mpo_dlc_trigger = yes
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_han_chinese
                    }
				}				
			}
			modifier = {
				add = -100
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = steppe
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = steppe
					}
				}
				has_mpo_dlc_trigger = yes				
				OR = {
					culture = culture:khitan
					culture = {
						any_parent_culture_or_above = {
							this = culture:khitan
						}
					}
				}
			}			
		}
	}

	mpo_khitan_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = steppe
					}
					portrait_royalty_trigger = {
						CULTURE_INPUT = steppe
					}
				}
				has_mpo_dlc_trigger = yes				
				OR = {
					culture = culture:khitan
					culture = {
						any_parent_culture_or_above = {
							this = culture:khitan
						}
					}
				}
			}			
		}
	}
	
	mpo_turkic_royalty_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_eastern_turk
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_eastern_turk
					}   
				}
                portrait_era1_trigger = yes 
				is_female = no
				has_mpo_dlc_trigger = yes						
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
			}
		}
	}	
	
	mpo_turkic_royalty_non_muslim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_eastern_turk
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_eastern_turk
					}   
				}
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = no
				has_mpo_dlc_trigger = yes						
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}	
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
			}
		}
	}

	mpo_seljuk_royalty_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mpo_mongol_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					portrait_imperial_trigger = {
						CULTURE_INPUT = epe_seljuk
					}   
					portrait_royalty_trigger = {
						CULTURE_INPUT = epe_seljuk
					}   
				}
                portrait_era1_trigger = yes 
				is_female = no
				has_mpo_dlc_trigger = yes										
			}
		}
	}		

## Northern Pagans ##

####################################################################################################
##################
###Norse
##################
####################################################################################################

	norse_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_norse
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 20
				portrait_commoner_clothing_trigger = {
					CULTURE_INPUT = epe_norse
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

    fp1_norse_era1_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = fp1_common
                range = { 0 0.34 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_norse
				}
				has_ep2_dlc_trigger = yes 
                has_fp1_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes					
                }
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_norse
                } 
                has_ep2_dlc_trigger = yes
                has_fp1_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes					
                }         
            }
        }
    }

    ep2_norse_era1_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = northern_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_norse
				}
				has_ep2_dlc_trigger = yes			
				portrait_era1_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_norse
                } 
                has_ep2_dlc_trigger = yes			
                portrait_era1_trigger = yes     
            }
        }
    }

    ep2_norse_era2_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = northern_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_norse
				}
				has_ep2_dlc_trigger = yes 
				portrait_era2_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_norse
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era2_trigger = yes     
            }
        }
    }

    ep2_norse_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = northern_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_norse
				}
				has_ep2_dlc_trigger = yes 
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_norse
                } 
                has_ep2_dlc_trigger = yes   
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }    
            }
        }
    }
	
    fp4_norse_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = fp4_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_norse
				}
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_religious_christian_trigger = yes
				}  
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_norse
                } 
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_religious_christian_trigger = yes
				}     
            }
        }
    }	

	norse_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_norse
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}


	fp1_norse_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_low_nobility
				range = { 0 0.23 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_norse
				}
				has_ep2_dlc_trigger = yes
                has_fp1_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes					
                }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                has_fp1_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes					
                }
			}
		}
	}

	ep2_norse_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_norse
				}
				has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }					
				portrait_era1_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }					
                portrait_era1_trigger = yes  
			}
		}
	}

	ep2_norse_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_norse
				}
				has_ep2_dlc_trigger = yes 
                NOT = {
                    has_fp1_dlc_trigger = yes
                }				
				portrait_era2_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }				
                portrait_era2_trigger = yes  
			}
		}
	}

	ep2_norse_era3_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era3_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_norse
				}
				has_ep2_dlc_trigger = yes 
				portrait_era3_trigger = yes 
			}
			modifier = {
				add = 50
				portrait_low_nobles_clothing_trigger = {  
					CULTURE_INPUT = epe_norse 
				}
				has_ep2_dlc_trigger = yes
				OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
				}
			}
			modifier = {
				add = 50
				portrait_low_nobles_clothing_trigger = {  
					CULTURE_INPUT = epe_norse 
				}
				has_ep2_dlc_trigger = yes
				OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
				}
				is_female = yes
			}
		}
	}

	norse_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }				
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	fp1_norse_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_nobility
				range = { 0 0.51 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                has_fp1_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes				
                } 
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                has_fp1_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes				
                } 
				is_female = yes
			}
		}
	}

	ep2_norse_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes				
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes				
                portrait_era1_trigger = yes  
				is_female = yes
			}
		}
	}

	ep2_norse_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }					
                portrait_era2_trigger = yes  
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }					
                portrait_era2_trigger = yes  
				is_female = yes
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
			}
		}
	}

	fp1_norse_era3_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_nobility
				range = { 0 0.16 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                has_fp1_dlc_trigger = yes				
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes					
                } 
				is_female = yes
			}
		}
	}	
	
	ep2_norse_era3_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
                OR = {
					portrait_era3_trigger = yes  
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
                OR = {
					portrait_era3_trigger = yes  
                }
				is_female = yes
			}
		}
	}
	
	
	ep2_norse_era4_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes  
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era4_trigger = yes  
                }
				is_female = yes
			}
		}
	}	

	norse_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}


	ep2_norse_era2_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                portrait_era2_trigger = yes  
				is_female = yes
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
			}
		}
	}

	ep2_norse_era3_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
                OR = {
					portrait_era3_trigger = yes  
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}		
                OR = {
					portrait_era3_trigger = yes  
                }
				is_female = yes
			}
		}
	}

	norse_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_norse 
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep1_norse_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_norse 
				}
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
					portrait_era2_trigger = yes  
                }  
            }
		}
	}

	fp1_norse_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_royalty
				range = { 0 0.17 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                has_fp1_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes
                }
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                has_fp1_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes
                }
				is_female = yes
			}
		}
	}

	ep2_norse_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }				
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }				
                portrait_era1_trigger = yes  
				is_female = yes
			}
		}
	}

	ep2_norse_era2_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }				
                portrait_era2_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }				
                portrait_era2_trigger = yes  
				is_female = yes
			}
		}
	}

	ep2_norse_era3_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_era3_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }
				is_female = yes  
			}
		}
	}
	
	norse_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = epe_norse 
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = epe_norse 
				}
				NOT = { has_ep2_dlc_trigger = yes }
				is_female = yes
			}
		}
	}

	fp1_norse_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_imperial
				range = { 0 0.25 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                has_fp1_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes
                }
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                has_fp1_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes
                }
				is_female = yes 
			}
		}
	}

	ep2_norse_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }				
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }				
                portrait_era1_trigger = yes 
				is_female = yes 
			}
		}
	}

	ep2_norse_era2_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }				
                OR = {
					portrait_era2_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_fp1_dlc_trigger = yes
                }				
                OR = {
					portrait_era2_trigger = yes
                }
				is_female = yes  
			}
		}
	}

	ep2_norse_era4_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_norse 
                }
                has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
				is_female = yes  
			}
		}
	}
	
	
	## POL ##

	pol_west_slavic_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pol_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 90
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = west_slavic
                }
			}
			modifier = {
				add = 30
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = west_slavic
                }
			}
            modifier = {
                factor = 0     
                has_ep2_dlc_trigger = yes   
            }			
		}
	}

	pol_west_slavic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pol_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = west_slavic } 
			modifier = {
				add = 80
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = west_slavic
                }
			}
            modifier = {
                factor = 0     
                has_ep2_dlc_trigger = yes   
            }			
		}
	}

	pol_west_slavic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pol_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = west_slavic
                }
			}
			modifier = {
				add = 80
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = west_slavic
                }
				is_female = yes
			}
            modifier = {
                factor = 0     
                has_ep2_dlc_trigger = yes   
            }			
		}
	}

	pol_west_slavic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pol_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 100
                portrait_royalty_trigger = {
                    CULTURE_INPUT = west_slavic
                }
			}
            modifier = {
                factor = 0     
                has_ep2_dlc_trigger = yes   
            }			
		}
	}

	pol_west_slavic_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pol_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}	
		weight = {
			base = 0
			modifier = {
				add = 100
                portrait_imperial_trigger = {
                    CULTURE_INPUT = west_slavic 
                }
			}
            modifier = {
                factor = 0     
                has_ep2_dlc_trigger = yes   
            }			
		}
	}
	
		## CCP4 Sami ##

ccp4_sami_commoners = {
	dna_modifiers = {
		accessory = {
			mode = add
			gene = headgear
			template = ccp4_sami_common
			range = { 0 1 } # For the randomness to work correctly
		}
		accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
	}
	weight = {
		base = 0
		modifier = {
			add = 90
			portrait_commoner_headgear_fallback_trigger = {
				CULTURE_INPUT = sami
			}
		}
		modifier = {
			add = 30
			portrait_commoner_clothing_trigger = {
				CULTURE_INPUT = sami
			}
		}
	}
}

ccp4_sami_low_nobles = {
	dna_modifiers = {
		accessory = {
			mode = add
			gene = headgear
			template = ccp4_sami_low_nobility
			range = { 0 1 } # For the randomness to work correctly
		}
		accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
	}
	weight = {
		base = 0
		court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = sami } 
		modifier = {
			add = 80
			portrait_low_nobles_clothing_trigger = {
				CULTURE_INPUT = sami
			}
		}
	}
}

ccp4_sami_high_nobles = {
	dna_modifiers = {
		accessory = {
			mode = add
			gene = headgear
			template = ccp4_sami_high_nobility
			range = { 0 1 } # For the randomness to work correctly
		}
		accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
	}
	weight = {
		base = 0
		modifier = {
			add = 80
			portrait_high_nobles_headgear_trigger = {
				CULTURE_INPUT = sami
			}
		}
	}
}

	ccp4_sami_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ccp4_sami_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 100
                portrait_royalty_trigger = {
                    CULTURE_INPUT = sami
                }
			}		
		}
	}

	ccp4_sami_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ccp4_sami_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}	
		weight = {
			base = 0
			modifier = {
				add = 100
                portrait_imperial_trigger = {
                    CULTURE_INPUT = sami 
                }
			}		
		}
	}

## CCP4 Khanty ##

ccp4_ugro_permian_commoners = {
	dna_modifiers = {
		accessory = {
			mode = add
			gene = headgear
			template = ccp4_khanty_common
			range = { 0 1 } # For the randomness to work correctly
		}
		accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
	}
	weight = {
		base = 0
		modifier = {
			add = 90
			portrait_commoner_headgear_fallback_trigger = {
				CULTURE_INPUT = ugro_permian
			}
		}
		modifier = {
			add = 30
			portrait_commoner_clothing_trigger = {
				CULTURE_INPUT = ugro_permian
			}
		}
	}
}

ccp4_ugro_permian_low_nobles = {
	dna_modifiers = {
		accessory = {
			mode = add
			gene = headgear
			template = ccp4_khanty_low_nobility
			range = { 0 1 } # For the randomness to work correctly
		}
		accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
	}
	weight = {
		base = 0
		court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = ugro_permian } 
		modifier = {
			add = 80
			portrait_low_nobles_clothing_trigger = {
				CULTURE_INPUT = ugro_permian
			}
		}
	}
}

ccp4_ugro_permian_high_nobles = {
	dna_modifiers = {
		accessory = {
			mode = add
			gene = headgear
			template = ccp4_khanty_high_nobility
			range = { 0 1 } # For the randomness to work correctly
		}
		accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
	}
	weight = {
		base = 0
		modifier = {
			add = 80
			portrait_high_nobles_headgear_trigger = {
				CULTURE_INPUT = ugro_permian
			}
		}
	}
}

	ccp4_ugro_permian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ccp4_khanty_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 100
                portrait_royalty_trigger = {
                    CULTURE_INPUT = ugro_permian
                }
			}		
		}
	}

	ccp4_ugro_permian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ccp4_khanty_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}	
		weight = {
			base = 0
			modifier = {
				add = 100
                portrait_imperial_trigger = {
                    CULTURE_INPUT = ugro_permian 
                }
			}		
		}
	}

## FP3 Iranian ##

	# 	fp3_iranian_low_nobles = {
	# 		dna_modifiers = {
	# 			accessory = {
	# 				mode = add
	# 				gene = headgear
	# 				template = fp3_iranian_low_nobility
	# 				range = { 0 1 } # For the randomness to work correctly
	# 			}
	# 		}
	# 		weight = {
	# 			base = 0
	# 			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = fp3_iranian } 
	# 			modifier = {
	# 				add = 51 # Slightly higher
	# 				portrait_low_nobles_clothing_trigger = {
	# 					CULTURE_INPUT = fp3_iranian
	# 				}
	# 			}
	# 		}
	# 	}

	# 	fp3_iranian_high_nobles = {
	# 		dna_modifiers = {
	# 			accessory = {
	# 				mode = add
	# 				gene = headgear
	# 				template = fp3_iranian_nobility
	# 				range = { 0 1 } # For the randomness to work correctly
	# 			}
	# 		}
	# 		weight = {
	# 			base = 0
	# 			modifier = {
	# 				add = 51 # Slightly higher
	# 				portrait_high_nobles_headgear_trigger = {
	# 					CULTURE_INPUT = fp3_iranian
	# 				}   
	# 			}
	# 			modifier = {
	# 				add = 51 # Slightly higher
	# 				portrait_high_nobles_headgear_trigger = {
	# 					CULTURE_INPUT = fp3_iranian
	# 				}
	# 				is_female = yes	   
	# 			}
	# 		}
	# 	}

	# 	fp3_iranian_royalty = {
	# 		dna_modifiers = {
	# 			accessory = {
	# 				mode = add
	# 				gene = headgear
	# 				template = fp3_iranian_royalty
	# 				range = { 0 1 } # For the randomness to work correctly
	# 			}
	# 		}
	# 		weight = {
	# 			base = 0
	# 			modifier = {
	# 				add = 51 # Slightly higher
	# 				portrait_royalty_trigger = {
	# 					CULTURE_INPUT = fp3_iranian
	# 				}   
	# 			}
	# 			modifier = {
	# 				add = 51 # Slightly higher
	# 				portrait_royalty_trigger = {
	# 					CULTURE_INPUT = fp3_iranian
	# 				} 
	# 				is_female = yes  
	# 			}	
	# 		}
	# 	}

	# 	fp3_iranian_imperial = {
	# 		dna_modifiers = {
	# 			accessory = {
	# 				mode = add
	# 				gene = headgear
	# 				template = fp3_iranian_imperial
	# 				range = { 0 1 } # For the randomness to work correctly
	# 			}
	# 		}
	# 		weight = {
	# 			base = 0
	# 			modifier = {
	# 				add = 51 # Slightly higher
	# 				portrait_imperial_trigger = {
	# 					CULTURE_INPUT = fp3_iranian
	# 				}   
	# 			}
	# 			modifier = {
	# 				add = 51 # Slightly higher
	# 				portrait_imperial_trigger = {
	# 					CULTURE_INPUT = fp3_iranian
	# 				}
	# 				is_female = yes   
	# 			}
	# 		}
	# 	}


## FP2 Iberian ##
	fp2_iberian_muslim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_muslim_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = fp2_iberian_muslim
                }
			}
			modifier = {
				add = 101 # Slightly higher
				portrait_commoner_no_mayors_trigger = {
                    CULTURE_INPUT = fp2_iberian_muslim
                }
			}
		}
	}

	fp2_iberian_muslim_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_muslim_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = fp2_iberian_muslim
				}				
			}
		}
	}

	fp2_iberian_muslim_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_muslim_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = fp2_iberian_muslim } 
			modifier = {
				add = 101 # Slightly higher
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = fp2_iberian_muslim
                }
			}
		}
	}

	fp2_iberian_muslim_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_muslim_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101 # Slightly higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = fp2_iberian_muslim
                }   
			}
		}
	}

	fp2_iberian_muslim_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_muslim_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101 # Slightly higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = fp2_iberian_muslim
                }  
			}
		}
	}
	
	fp2_iberian_muslim_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_muslim_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101 # Slightly higher
                portrait_imperial_trigger = {
                    CULTURE_INPUT = fp2_iberian_muslim
                }  
			}
		}
	}	

	fp2_iberian_christian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_christian_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { iberian_christian_shrimp_wrap }
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = fp2_iberian_christian
                }
			}
			modifier = {
				add = 41 # Slightly higher
                portrait_commoner_clothing_trigger = {  
                    CULTURE_INPUT = fp2_iberian_christian 
                }
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes   
                portrait_era1_trigger = yes
            }
		}
	}

	fp2_iberian_christian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_christian_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = fp2_iberian_christian } 
			modifier = {
				add = 60 # Slightly higher
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = fp2_iberian_christian
                }
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes   
                portrait_era1_trigger = yes 
            }
		}
	}

	fp2_iberian_christian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_christian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 60 # Slightly higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = fp2_iberian_christian
                } 
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes   
                portrait_era1_trigger = yes 
            }
		}
	}

	fp2_iberian_christian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp2_christian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = fp2_iberian_christian
                }  
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes   
                portrait_era1_trigger = yes 
            }
		}
	}

## FP1 NORSE ##

	fp1_norse_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_common
				range = { 0 0.34 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = fp1_norse
                }
			}
			modifier = {
				add = 41 # Slightly higher
                portrait_commoner_clothing_trigger = {  
                    CULTURE_INPUT = fp1_norse 
                }
			}
            modifier = {
                factor = 0     
                has_ep2_dlc_trigger = yes   
            }			
		}
	}

	fp1_norse_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_low_nobility
				range = { 0 0.23 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = fp1_norse } 
			modifier = {
				add = 51 # Slightly higher
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = fp1_norse
                }
			}
            modifier = {
                factor = 0     
                has_ep2_dlc_trigger = yes   
            }			
		}
	}

	fp1_norse_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_nobility
				range = { 0 0.51 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = fp1_norse
                }   
			}
            modifier = {
                factor = 0     
                has_ep2_dlc_trigger = yes   
            }			
		}
	}

	fp1_norse_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_royalty
				range = { 0 0.17 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				OR = {
					AND = {
						has_dlc_feature = the_northern_lords
		                portrait_royalty_trigger = {
		                    CULTURE_INPUT = northern
		                } 
					}
	                portrait_royalty_trigger = {
	                    CULTURE_INPUT = fp1_norse
	                } 	                
				}  
			}
            modifier = {
                factor = 0     
                has_ep2_dlc_trigger = yes   
            }			
		}
	}

	fp1_norse_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_imperial
				range = { 0 0.25 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over northern
				OR = {
					AND = {
						has_dlc_feature = the_northern_lords
		                portrait_imperial_trigger = {
		                    CULTURE_INPUT = northern
		                } 
					}
	                portrait_imperial_trigger = {
	                    CULTURE_INPUT = fp1_norse
	                } 	                
				}
			}
            modifier = {
                factor = 0     
                has_ep2_dlc_trigger = yes   
            }			
		}
	}

## Sub-Saharan Africans ##

	african_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = african
                }
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = african 
                }
			}
			modifier = {
				add = 50
                portrait_commoner_clothing_trigger = {  
                    CULTURE_INPUT = african 
                }
			}
		}
	}

	sub_saharan_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = african
                }   
			}
		}
	}

	sub_saharan_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_african_headgear_trigger = yes
			}
		}
	}

	ep1_sub_saharan_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_sub_saharan_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_african_headgear_trigger = yes
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
		}
	}

	sub_saharan_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_nobles_headgear_trigger = {
					CULTURE_INPUT = african
				}
			}
		}
	}


	sub_saharan_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_war
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { military_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
                portrait_war_nobles_helmet_trigger = {
                    CULTURE_INPUT = african
                }
			}
		}
	}




######## Religious ##########


## Orthodox ##

	religious_orthodox_high = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_orthodox_high
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit bishop_outfit }
		weight = {
			base = 0
			modifier = {
				add = 130
				portrait_religious_orthodox_trigger = yes
				portrait_religious_high_headgear_trigger = {
					FAITH_INPUT = orthodox
				}
			}
		}
	}

	religious_orthodox_head = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_orthodox_head
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 200
				portrait_religious_head_trigger = yes
				faith = faith:orthodox
			}
		}
	}


## Catholic ##

	catholic_devoted = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_catholic_devoted
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_religious_devoted_trigger = yes
				portrait_religious_christian_trigger = yes
			}
		}
	}

	catholic_head = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add

				gene = headgear
				template = catholic_head
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 120			
				portrait_religious_head_trigger = yes
				portrait_religious_catholic_trigger = yes	
			}	
		}
	}

	catholic_high = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add

				gene = headgear
				template = catholic_high
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit bishop_outfit }
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_religious_christian_trigger = yes
				portrait_religious_high_trigger = yes
			}
		}
	}

	popes = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add

				gene = headgear
				template = catholic_head
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 140
				portrait_religious_head_popes_trigger = yes
			}
		}
	}

## Jewish ##

	religious_jewish_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_jewish_high
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_religious_high_no_poverty_trigger = yes
				OR = {
					portrait_religious_jewish_trigger = yes
					portrait_religious_hellenism_trigger = yes
				}
			}
		}
	}

	religious_jewish_head = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add

				gene = headgear
				template = religious_jewish_head
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 140
				portrait_religious_head_no_poverty_trigger = yes
				portrait_religious_jewish_trigger = yes
			}
		}
	}

## Muslim ##

	religious_muslim_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_muslim_high
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 111
				portrait_religious_high_no_poverty_trigger = yes
				portrait_religious_muslim_trigger = yes
			}
		}
	}



## Northern Pagan ##

	religious_northern_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_northern_high
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_religious_high_no_poverty_trigger = yes
				portrait_religious_norse_trigger = yes
			}
		}
	}


## Steppe ##

	religious_steppe_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_steppe_high
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_religious_high_no_poverty_trigger = yes
				portrait_religious_steppe_trigger = yes
			}
		}
	}

## Buddhist ##

	religious_buddhist_devoted_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_has_trait_trigger = { TRAIT = devoted }
				portrait_religious_buddhist_trigger = yes
			}
			modifier = {
				add = 101
				exists = this
				has_primary_title = title:k_sakya_trizin
				NOT = { is_female = yes	}
				cfp_clothing_no_override_trigger = yes				
			}   
		}
	}

	religious_buddhist_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_religious_high_no_poverty_trigger = yes
				portrait_religious_buddhist_trigger = yes
			}
		}
	}

## Hinduist ##

	religious_hindu_devoted_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_has_trait_trigger = { TRAIT = devoted }
				portrait_religious_hindu_trigger = yes
			}
		}
	}

	religious_hindu_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_religious_high_no_poverty_trigger = yes
				portrait_religious_hindu_trigger = yes
			}
		}
	}

## Zoroastrian ##

	religious_zoroastrian_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_zoroastrian_high
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_religious_high_no_poverty_trigger = yes
				portrait_religious_zoroastrian_trigger = yes
			}
		}
	}

## Jain ##

	religious_jain_devoted_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_has_trait_trigger = { TRAIT = devoted }
				portrait_religious_jain_trigger = yes
			}
		}
	}

	religious_jain_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 110
				exists = this
				portrait_religious_high_no_poverty_trigger = yes
				portrait_religious_jain_trigger = yes
			}
		}
	}

## African Pagan ##

	# religious_african_devoted_clothes = {
	# 	dna_modifiers = {
	# 		accessory = {
	# 			mode = add
	# 			gene = clothes
	# 			template = mena_commoner_clothes
	# 			range = { 0 1 } # For the randomness to work correctly
	# 		}
	# 	}
	#	outfit_tags = { monk_outfit }
	# 	weight = {
	# 		base = 0
	# 		modifier = {
	# 			add = 100
	# 			portrait_has_trait_trigger = { TRAIT = devoted }
	# 			religion = religion:islam_religion
	# 		}
	# 	}
	# }

	religious_african_high_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_african_high
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { priest_outfit }
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_religious_high_no_poverty_trigger = yes
				portrait_religious_african_trigger = yes
			}
		}
	}

	jester_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add

				gene = headgear
				template = ep1_jester
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { jester_outfit }
		weight = {
			base = -100
			modifier = {
				add = 1000
				OR = {
					portrait_jester_trigger = { CULTURE_INPUT = western }
					portrait_jester_trigger = { CULTURE_INPUT = byzantine }
					portrait_jester_trigger = { CULTURE_INPUT = northern }
				}				
			}
			modifier = {
				factor = 0
				OR = {
					is_adult = no
					should_be_naked_trigger = yes
				}
			}
		}
	}

	master_assassin_headgear = {
	    dna_modifiers = {
			accessory = {
				mode = add

				gene = headgear
				template = mena_stealth
				range = { 0 1 }
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
	    weight = {
			base = -100
			modifier = {
				add = 1000
				has_court_position = master_assassin_court_position
			}
			modifier = {
				factor = 0
				OR = {
					is_adult = no
					should_be_naked_trigger = yes
				}
			}			
		}
	}

	#RTT headgear
	monarchs_journey_late_unlock = {
		dna_modifiers = {
			accessory = {
				mode = add

				gene = headgear
				template = monarchs_journey_unleashed
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}

		weight = {
			base = -100
			modifier = {
				add = 110
				current_date >= 1300.1.1
				OR = {
					portrait_western_clothing_trigger = yes
					portrait_western_clothing_spouse_trigger = yes
				}
				OR = {
					AND = {
						is_lowborn = no
						is_female = yes
					}
					AND = {
						government_has_flag = government_is_republic
						highest_held_title_tier <= tier_barony
					}
				}
			}
		}
	}
	
	hajj_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 500
				exists = this
				OR = {
					portrait_ep2_hajj_clothes_trigger = yes
					portrait_ep2_ihram_clothes_trigger = yes
				}
			}
		}
	}

	# EP2 - WEDDINGS

	wedding_western_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_wedding
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		outfit_tags = { spouse_outfit }
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_ep2_dlc_trigger = yes
				portrait_ep2_wedding_clothes_trigger = yes
				OR = {
					portrait_western_clothing_trigger = yes
					portrait_northern_clothing_trigger = yes
				}
			}
		}
	}

	wedding_mena_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_wedding
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		outfit_tags = { spouse_outfit }
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_ep2_dlc_trigger = yes
				portrait_ep2_wedding_clothes_trigger = yes
				OR = {
					portrait_mena_clothing_trigger = yes
					portrait_african_clothing_trigger = yes
					portrait_indian_clothing_trigger = yes
					portrait_steppe_clothing_trigger = yes
				}
			}
		}
	}

	wedding_byz_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_wedding
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		outfit_tags = { spouse_outfit }
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_ep2_dlc_trigger = yes
				portrait_ep2_wedding_clothes_trigger = yes
				portrait_byzantine_clothing_trigger = yes
			}
		}
	}
	
	
	
	
	
	
    ####################################################################################################
    ##################
    #################################EPE Expanded
    ##################
    ####################################################################################################		
	
	

##################
###EPE Bedouin
##################

	epe_bedouin_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_common
				range = { 0.57 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_bedouin
                }
				has_dde_abbasid_flavor_dlc_trigger = yes				
			}
		}
	}

	epe_bedouin_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0.39 0.55 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_bedouin
                }
				has_dde_abbasid_flavor_dlc_trigger = yes				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_bedouin
                }
				has_dde_abbasid_flavor_dlc_trigger = yes
				is_female = yes					
			}
		}
	}

	epe_bedouin_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_royalty
				range = { 0.64 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_bedouin
                }
				has_dde_abbasid_flavor_dlc_trigger = yes				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_bedouin
                }
				has_dde_abbasid_flavor_dlc_trigger = yes
				is_female = yes					
			}
		}
	}

	epe_bedouin_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over mena
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_bedouin 
                }
				has_dde_abbasid_flavor_dlc_trigger = yes				
			}
			modifier = {
				add = 100 # pick over mena
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_bedouin 
                }
				has_dde_abbasid_flavor_dlc_trigger = yes
				is_female = yes				
			}
		}
	}	


    ####################################################################################################
    ##################
    ###Non-DLC Iranian 
    ##################
    ####################################################################################################
	

	non_dlc_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_non_dlc_iranian 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
		}
	}

	non_dlc_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_non_dlc_iranian
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
		}
	}

	non_dlc_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_non_dlc_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
				is_female = yes				
			}
		}
	}

	non_dlc_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}

	non_dlc_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}
	
	non_dlc_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_non_dlc_iranian 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                NOT = {
	                has_fp3_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}	

####################################################################################################
##################
###EPE-Eastern non islamic Iranian
##################
####################################################################################################

	eastern_non_islamic_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_common
				range = { 0.87 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
	            has_fp3_dlc_trigger = yes 					
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }	
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_non_islamic_iranian 
                }
			}
			modifier = {
				add = 20
	            has_fp3_dlc_trigger = yes 					
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				# NOT = {
				# 	portrait_commoner_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	eastern_non_islamic_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0.79 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
	            has_fp3_dlc_trigger = yes				
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_non_islamic_iranian
				}
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_eastern_non_islamic_iranian
				}				
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				# NOT = {
				# 	portrait_mayor_headgear_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
			modifier = {
				add = 60
	            has_fp3_dlc_trigger = yes				
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_non_islamic_iranian
				}
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_eastern_non_islamic_iranian
				}				
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				is_female = yes
				# NOT = {
				# 	portrait_mayor_headgear_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	eastern_non_islamic_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0.79 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_non_islamic_iranian } 
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				# NOT = {
				# 	portrait_low_nobles_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				is_female = yes
				# NOT = {
				# 	portrait_low_nobles_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	eastern_non_islamic_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_high_nobility
				range = { 0.79 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}					
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}					
				is_female = yes							
			}
		}
	}

	eastern_non_islamic_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_royalty
				range = { 0.79 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				# NOT = {
				# 	portrait_royalty_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				is_female = yes				
				# NOT = {
				# 	portrait_royalty_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}
	
	eastern_non_islamic_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_imperial
				range = { 0.79 1 }	# For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                }				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				# NOT = {
				# 	portrait_imperial_nobles_headgear_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

####################################################################################################
##################
### Western Iranian non-muslim
##################
####################################################################################################

	Western_non_islamic_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_common
				range = { 0.74 0.84 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_non_islamic_iranian 
                }
			}
			modifier = {
				add = 20
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}				
				# NOT = {
				# 	portrait_commoner_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	Western_non_islamic_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0.64 0.76 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
	            has_fp3_dlc_trigger = yes				
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_non_islamic_iranian
				}
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_western_non_islamic_iranian
				}				
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}				
				# NOT = {
				# 	portrait_mayor_headgear_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	Western_non_islamic_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0.64 0.76 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_non_islamic_iranian } 
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}				
				# NOT = {
				# 	portrait_low_nobles_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}
				is_female = yes				
				# NOT = {
				# 	portrait_low_nobles_clothing_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}

	Western_non_islamic_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_high_nobility
				range = { 0.66 0.76 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}					
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}					
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}
				is_female = yes				
			}
		}
	}

	Western_non_islamic_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_royalty
				range = { 0.45 0.70 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}					
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}								
				# NOT = {
				# 	portrait_royalty_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_non_islamic_iranian
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_western_non_islamic_iranian
                }				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_hindu_iranian
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                    }
				}				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_non_islamic_iranian
                    }
				}
				is_female = yes								
				# NOT = {
				# 	portrait_royalty_trigger = { 
                #     CULTURE_INPUT = epe_sino_iranian
                #     }
				# }				
			}
		}
	}
	
	Western_non_islamic_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_imperial
				range = { 0.40 0.57 }	# For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				highest_held_title_tier = tier_empire
				NOR = {
					AND = {
						is_ruler = yes
						has_government = mercenary_government
					}
					has_government = republic_government
					AND = {
						is_ruler = yes
						has_government = theocracy_government
					}
				}
				portrait_epe_non_islamic_iranian_clothing_trigger = yes
				portrait_epe_western_non_islamic_iranian_clothing_trigger = yes				
				NOT = {
					portrait_epe_hindu_iranian_clothing_trigger = yes
				}
				NOT = {
					portrait_epe_christian_iranian_clothing_trigger = yes
				}				
				NOT = {
					portrait_epe_eastern_non_islamic_iranian_clothing_trigger = yes
				}				
				# NOT = {
				# 	portrait_epe_sino_iranian_clothing_trigger = yes
				# }				
			}
		}
	}

	Western_non_islamic_iranian_imperial_consort = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_imperial
				range = { 0.60 0.68 }	# For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				portrait_can_use_noble_headgear_trigger = yes
				OR = {
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							this.highest_held_title_tier < this.primary_spouse.highest_held_title_tier
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = {
									is_ruler = yes
									has_government = theocracy_government
								}
							}
							NOT = {
								AND = {
									is_ruler = yes
									has_government = mercenary_government
								}
							}							# Blocked for mercenaries
							NOT = {
								has_government = republic_government
							}
							portrait_epe_non_islamic_iranian_clothing_spouse_trigger = yes
							portrait_epe_western_non_islamic_iranian_clothing_spouse_trigger = yes							
							NOT = {
								portrait_epe_hindu_iranian_clothing_spouse_trigger = yes
							}
							NOT = {
								portrait_epe_christian_iranian_clothing_spouse_trigger = yes
							}							
							NOT = {
								portrait_epe_eastern_non_islamic_iranian_clothing_spouse_trigger = yes
							}							
						}
					}
				}
			}
		}
	}
	
####################################################################################################
##################
###Hindu Iranian
##################
####################################################################################################

	hindu_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_hindu_iranian 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }				
			}
		}
	}

	hindu_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_hindu_iranian
				}				
			}
		}
	}

	hindu_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_hindu_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }
				is_female = yes				
			}
		}
	}

	hindu_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }
				is_female = yes
			}
		}
	}

	hindu_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }
				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian
                }
				is_female = yes
			}
		}
	}
	
	hindu_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian 
                }			
			}
		}
	}	
	
	ep1_hindu_iranian_royalty = { 
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_indian_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_hindu_iranian
				}
				culture = {
					has_cultural_pillar = heritage_iranian
				}
				has_ep1_dlc_trigger = yes
			}
		}
	}

	ep1_hindu_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_indian_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_hindu_iranian 
                }
				culture = {
					has_cultural_pillar = heritage_iranian
				}
				has_ep1_dlc_trigger = yes
			}
		}
	}	
	
####################################################################################################
##################
###Iranian Christian
##################
####################################################################################################

	epe_christ_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0 0.38 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_christian_iranian
                }			
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_christian_iranian
                }			
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_epe_christ_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0 0.59 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_christian_iranian
                }				
				has_ep3_dlc_trigger = yes 
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_christian_iranian
                }				
				has_ep3_dlc_trigger = yes 
			}
		}
	}
	
	epe_christ_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility
				range = { 0 0.15 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_christian_iranian
				}				
			}
		}
	}


	epe_christ_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility
				range = { 0 0.15 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_christian_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_christian_iranian 
                }
				
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes    
            }
		}
	}

	ep3_epe_christ_iranian_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility 
				range = { 0 0.17 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = epe_christian_iranian
		        }
				
		        has_ep3_dlc_trigger = yes 
		        portrait_era1_trigger = yes 
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_christian_iranian 
                }			
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}


	ep3_epe_christ_iranian_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility 
				range = { 0.21 0.42 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = epe_christian_iranian
		        }					
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era1_trigger = yes  
                    portrait_era2_trigger = yes  
                } 
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_christian_iranian 
                }					
                has_ep3_dlc_trigger = yes
                OR = {
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_christ_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility
				range = { 0 0.11 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_christian_iranian
                }  				
			}
            modifier = {
                factor = 0 
                has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes   
            }
		}
	}

	ep3_epe_christ_iranian_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility 
				range = { 0 0.11 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 10
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_christian_iranian
                }				
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era1_trigger = yes  
                    portrait_era2_trigger = yes  
                }
			}
		}
	}

	ep3_epe_christ_iranian_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility 
				range = { 0.19 0.51 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_christian_iranian
                } 				
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_christ_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_royalty
				range = { 0 0.04 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_christian_iranian
                }				
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_epe_christ_iranian_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_royalty
				range = { 0.07 0.11 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_christian_iranian 
                }				
                has_ep3_dlc_trigger = yes
                OR = {
                    portrait_era1_trigger = yes  
                    portrait_era2_trigger = yes  
                }
			}
		}
	}

    ep3_epe_christ_iranian_era2_royalty = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = byzantine_royalty
                range = { 0.14 0.45 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                } 				
                has_ep3_dlc_trigger = yes   
                OR = {  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }

	epe_christ_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0.21 0.38 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_christian_iranian 
                }				
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
            }
		}
	}

	ep3_epe_christ_iranian_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0 0.18 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_christian_iranian 
                }				
                has_ep3_dlc_trigger = yes
                OR = {
                    portrait_era1_trigger = yes  
                    portrait_era2_trigger = yes  
                }				
			}
		}
	}

    ep3_epe_christ_iranian_era2_imperial = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = byzantine_imperial
                range = { 0.21 0.46 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_christian_iranian
                }             
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }

	####################################################################################################
	##################
	###Early Islamic Iranian 
	##################
	####################################################################################################

	early_islamic_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_common
				range = { 0 0.28 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_islamic_iranian 
                }
			}
			modifier = {
				add = 20
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes			
			}
		}
	}
	
	non_dlc_early_islamic_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes		
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				portrait_era1_trigger = yes
			}
		}
	}
	
	early_islamic_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0 0.29 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
	            has_fp3_dlc_trigger = yes				
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}
				NOT = {
					portrait_mayor_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes	
                has_fp3_dlc_trigger = yes				
			}
		}
	}

	non_dlc_early_islamic_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes		
				is_female = yes		
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				portrait_era1_trigger = yes
			}			
		}
	}

	early_islamic_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0 0.29 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes
                has_fp3_dlc_trigger = yes  				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes
                has_fp3_dlc_trigger = yes 
				is_female = yes 				
			}
		}
	}

	non_dlc_early_islamic_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes
				is_female = yes				
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				portrait_era1_trigger = yes
			}			
		}
	}

	early_islamic_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_high_nobility
				range = { 0 0.34 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}					
                portrait_era1_trigger = yes		
                has_fp3_dlc_trigger = yes 				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}					
                portrait_era1_trigger = yes		
                has_fp3_dlc_trigger = yes 
				is_female = yes				
			}
		}
	}

	early_islamic_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_royalty
				range = { 0 0.09 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes	
				is_female = yes			
			}
		}
	}

	early_islamic_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_imperial
				range = { 0 0.07 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}				
                portrait_era1_trigger = yes				
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_tahirid
					}
				}
				is_female = yes					
                portrait_era1_trigger = yes			
			}
		}
	}

	####################################################################################################
	##################
	###High medieval Islamic Iranian era 2-3
	##################
	####################################################################################################	

	islamic_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_common
				range = { 0.31 0.49 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_islamic_iranian 
                }
			}
			modifier = {
				add = 20
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }				
			}
		}
	}

	non_dlc_islamic_iranian_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }	
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
			}
		}
	}
	
	islamic_iranian_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0.32 0.44 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
                has_fp3_dlc_trigger = yes				
			}
		}
	}

	non_dlc_islamic_iranian_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }			
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
				is_female = yes			
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
			}			
		}
	}

	islamic_iranian_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0.32 0.44 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
                has_fp3_dlc_trigger = yes  				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
                has_fp3_dlc_trigger = yes 
				is_female = yes 				
			}
		}
	}

	non_dlc_islamic_iranian_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }			
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
				is_female = yes			
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
			}			
		}
	}

	islamic_iranian_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_high_nobility
				range = { 0.37 0.48 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
                has_fp3_dlc_trigger = yes 				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
                has_fp3_dlc_trigger = yes
				is_female = yes 				
			}
		}
	}

	islamic_iranian_mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_royalty
				range = { 0.12 0.31 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
			
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
				is_female = yes
			}
		}
	}

	islamic_iranian_mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_imperial
				range = { 0.10 0.21 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
			
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
                }
				is_female = yes
			}
		}
	}

	####################################################################################################
	##################
	###Late Islamic Iranian Era 4
	##################
	####################################################################################################	

	late_islamic_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_common
				range = { 0.51 0.70 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
					portrait_era4_trigger = yes  
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_islamic_iranian 
                }
			}
			modifier = {
				add = 20
	            has_fp3_dlc_trigger = yes				
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
					portrait_era4_trigger = yes  
                }				
			}
		}
	}

	non_dlc_late_islamic_iranian_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}			
                OR = {
					portrait_era4_trigger = yes  
				}	
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				OR = {
					portrait_era4_trigger = yes  
                }
			}
		}
	}
	
	late_islamic_iranian_mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0.48 0.61 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_islamic_iranian
				}				
                OR = {
					portrait_era4_trigger = yes  
                }
                has_fp3_dlc_trigger = yes				
			}
		}
	}

	non_dlc_late_islamic_iranian_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
					portrait_era4_trigger = yes  
				}			
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
					portrait_era4_trigger = yes  
				}
				is_female = yes			
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				OR = {
					portrait_era4_trigger = yes  
                }
			}			
		}
	}

	late_islamic_iranian_mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_low_nobility
				range = { 0.48 0.61 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_islamic_iranian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
					portrait_era4_trigger = yes  
                }
                has_fp3_dlc_trigger = yes  				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }				
                OR = {
					portrait_era4_trigger = yes  
                }
                has_fp3_dlc_trigger = yes  
				is_female = yes				
			}
		}
	}

	non_dlc_late_islamic_iranian_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }			
                OR = {
					portrait_era4_trigger = yes  
				}			
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }			
                OR = {
					portrait_era4_trigger = yes  
				}
				is_female = yes			
			}
			modifier = {
				factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
				has_fp3_dlc_trigger = yes   
				OR = {
					portrait_era4_trigger = yes  
                }
			}			
		}
	}

	late_islamic_iranian_mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_high_nobility
				range = { 0.51 0.63 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 				
                OR = {
					portrait_era4_trigger = yes  
                }
                has_fp3_dlc_trigger = yes 				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                } 				
                OR = {
					portrait_era4_trigger = yes  
                }
                has_fp3_dlc_trigger = yes
				is_female = yes 				
			}
		}
	}

	late_islamic_iranian_mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_royalty
				range = { 0.34 0.42 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
					portrait_era4_trigger = yes  
                }
			
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian
                }
                OR = {
					portrait_era4_trigger = yes  
                }
				is_female = yes
			}
		}
	}

	late_islamic_iranian_mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_iranian_imperial
				range = { 0.25 0.37 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
                OR = {
					portrait_era4_trigger = yes  
                }
			
			}
			modifier = {
				add = 50
	            has_fp3_dlc_trigger = yes				
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_islamic_iranian 
                }
                OR = {
					portrait_era4_trigger = yes  
                }
				is_female = yes
			}
		}
	}
	
	
##################
###Abbasid Tahirids	
##################	


	tahirid_iranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_common
				range = { 0 0.54 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_tahirid
                }
                portrait_era1_trigger = yes 				
			}
		}
	}
	
	tahirid_iranian_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0.56 0.74 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_tahirid
				}
                portrait_era1_trigger = yes				
			}
		}
	}	
	
	tahirid_iranian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0.56 0.74 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_tahirid } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_tahirid
                }
                portrait_era1_trigger = yes				
			}
		}
	}
	
	tahirid_iranian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0 0.37 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_tahirid
                }
                portrait_era1_trigger = yes 				
			}
		}
	}

	tahirid_iranian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_royalty
				range = { 0 0.61 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_tahirid
                }
                portrait_era1_trigger = yes 		
			}
		}
	}
	
	tahirid_iranian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over mena
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_tahirid 
                }
                portrait_era1_trigger = yes 			
			}
		}
	}		
	
	
####################################################################################################
##################
###Armenian
##################
####################################################################################################

	epe_armenian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0.84 0.94 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_armenian
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_armenian
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_epe_armenian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0.84 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_armenian
                }
				has_ep3_dlc_trigger = yes 
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_armenian
                }
				has_ep3_dlc_trigger = yes 
			}
		}
	}

	epe_armenian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility
				range = { 0.73 0.80 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_armenian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_armenian 
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_epe_armenian_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility 
				range = { 0.73 .84 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = epe_armenian
		        }
		        has_ep3_dlc_trigger = yes 
		        portrait_era1_trigger = yes 
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_armenian 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}


	ep3_epe_armenian_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility 
				range = { 0.85 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = epe_armenian
		        }
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_armenian 
                }
                has_ep3_dlc_trigger = yes
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_armenian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility
				range = { 0.77 0.80 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_armenian
                }   
			}
            modifier = {
                factor = 0 
                has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes   
            }
		}
	}

	ep3_epe_armenian_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility 
				range = { 0.77 0.84 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 10
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_armenian
                }   
		        has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes 
			}
		}
	}

	ep3_epe_armenian_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility 
				range = { 0.87 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_armenian
                }   
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_armenian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_royalty
				range = { 0.81 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_armenian
                }   
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
            }
		}
	}

	ep3_epe_armenian_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_royalty
				range = { 0.81 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_armenian 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

    ep3_epe_armenian_era2_royalty = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = byzantine_royalty
                range = { 0.81 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_armenian
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }

	epe_armenian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0.71 0.73 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_armenian 
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
            }
		}
	}


	ep3_epe_armenian_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0.71 0.76 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_armenian 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

    ep3_epe_armenian_era2_imperial = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = byzantine_imperial
                range = { 0.79 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_armenian
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }	
	
	
####################################################################################################
##################
###Georgian
##################
####################################################################################################

	epe_georgian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0.63 0.76 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_georgian
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_georgian
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_epe_georgian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0.63 0.81 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_georgian
                }
				has_ep3_dlc_trigger = yes 
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_georgian
                }
				has_ep3_dlc_trigger = yes 
			}
		}
	}

	epe_georgian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility
				range = { 0.45 0.54 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_georgian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_georgian 
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes    
            }
		}
	}

	ep3_epe_georgian_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility 
				range = { 0.45 0.56 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = epe_georgian
		        }
		        has_ep3_dlc_trigger = yes 
		        portrait_era1_trigger = yes 
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_georgian 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}


	ep3_epe_georgian_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility 
				range = { 0.59 0.70 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = epe_georgian
		        }
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_georgian 
                }
                has_ep3_dlc_trigger = yes
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_georgian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility
				range = { 0.54 0.55 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_georgian
                }   
			}
            modifier = {
                factor = 0 
                has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes   
            }
		}
	}

	ep3_epe_georgian_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility 
				range = { 0.54 0.61 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 10
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_georgian
                }   
		        has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes 
			}
		}
	}

	ep3_epe_georgian_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility 
				range = { 0.64 0.74 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_georgian
                }   
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_georgian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_royalty
				range = { 0.50 0.62 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_georgian
                }   
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_epe_georgian_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_royalty
				range = { 0.50 0.62 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_georgian 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

    ep3_epe_georgian_era2_royalty = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = byzantine_royalty
                range = { 0.50 0.62 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_georgian
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }

	epe_georgian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0.50 0.51 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_georgian 
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
            }
		}
	}


	ep3_epe_georgian_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0.50 0.55 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_georgian 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

    ep3_epe_georgian_era2_imperial = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = byzantine_imperial
                range = { 0.58 0.67 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_georgian
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }	
	

####################################################################################################
##################
###Bulgarian
##################
####################################################################################################

	epe_bulgarian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0 0.38 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_epe_bulgarian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_common
				range = { 0 0.47 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }
				has_ep3_dlc_trigger = yes 
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }
				has_ep3_dlc_trigger = yes 
			}
		}
	}

	epe_bulgarian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility
				range = { 0 0.15 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_bulgarian } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_bulgarian 
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes  
            }
		}
	}

	ep3_epe_bulgarian_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_low_nobility 
				range = { 0 0.19 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = epe_bulgarian
		        }
		        has_ep3_dlc_trigger = yes 
		        portrait_era1_trigger = yes 
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_bulgarian 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

	ep3_epe_bulgarian_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_low_nobility 
				range = { 0.21 0.48 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = epe_bulgarian
		        }
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_bulgarian 
                }
                has_ep3_dlc_trigger = yes
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_bulgarian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility
				range = { 0 0.11 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }   
			}
            modifier = {
                factor = 0 
                has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes   
            }
		}
	}

	ep3_epe_bulgarian_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_high_nobility 
				range = { 0 0.14 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 10
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }   
		        has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes 
			}
		}
	}

	ep3_epe_bulgarian_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_high_nobility 
				range = { 0.16 0.46 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }   
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_bulgarian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_royalty
				range = { 0 0.06 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_bulgarian
                }   
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_epe_bulgarian_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_royalty
				range = { 0 0.15 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_bulgarian 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

    ep3_epe_bulgarian_era2_royalty = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = epe_balkan_royalty
                range = { 0.18 0.39 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }

	epe_bulgarian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_imperial
				range = { 0 0.04 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_bulgarian 
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
            }
		}
	}



	ep3_epe_bulgarian_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_imperial
				range = { 0 0.11 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_bulgarian 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

    ep3_epe_bulgarian_era2_imperial = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = epe_balkan_imperial
                range = { 0.16 0.34 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_bulgarian
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }

####################################################################################################
##################
###South Slav
##################
####################################################################################################

	epe_south_slav_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0 0.38 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_epe_south_slav_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_common
				range = { 0.50 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }
				has_ep3_dlc_trigger = yes 
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }
				has_ep3_dlc_trigger = yes 
			}
		}
	}

	epe_south_slav_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_low_nobility
				range = { 0 0.15 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_south_slav } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_south_slav 
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_epe_south_slav_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_low_nobility 
				range = { 0.51 0.70 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = epe_south_slav
		        }
		        has_ep3_dlc_trigger = yes 
		        portrait_era1_trigger = yes 
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_south_slav 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}


	ep3_epe_south_slav_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_low_nobility 
				range = { 0.72 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
		    modifier = {
		        add = 50
		        court_fashion_level_4_headgear_trigger = {
		            CULTURE_INPUT = epe_south_slav
		        }
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
		    }
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_south_slav 
                }
                has_ep3_dlc_trigger = yes
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_south_slav_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility
				range = { 0 0.11 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }   
			}
            modifier = {
                factor = 0 
                has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes   
            }
		}
	}

	ep3_epe_south_slav_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_high_nobility 
				range = { 0.49 0.64 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 10
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }   
		        has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes 
			}
		}
	}

	ep3_epe_south_slav_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_high_nobility 
				range = { 0.66 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }   
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_south_slav_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_royalty
				range = { 0.43 0.46 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_south_slav
                }   
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes   
            }
		}
	}

	ep3_epe_south_slav_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_royalty
				range = { 0.43 0.56 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_south_slav 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

    ep3_epe_south_slav_era2_royalty = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = epe_balkan_royalty
                range = { 0.59 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }

	epe_south_slav_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0.11 0.31 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_south_slav 
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
            }
		}
	}

	ep3_epe_south_slav_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_balkan_imperial
				range = { 0.37 0.47 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 85
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_south_slav 
                }
                has_ep3_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

    ep3_epe_south_slav_era2_imperial = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = epe_balkan_imperial
                range = { 0.51 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_south_slav
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }
	
####################################################################################################
##################
###Eastern Turkic/Default Turk
##################
####################################################################################################

	eastern_turk_commoners_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_common
				range = { 0 0.36 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                portrait_era1_trigger = yes 				
			}
		}
	}

	eastern_turk_low_nobles_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_low_nobility
				range = { 0 0.36 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_eastern_turk } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
				is_female = yes
                portrait_era1_trigger = yes 				
			}
		}
	}

	eastern_turk_high_nobles_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_high_nobility
				range = { 0 0.25 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
				is_female = yes
                portrait_era1_trigger = yes 				
			}
		}
	}

	eastern_turk_royalty_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_royalty
				range = { 0 0.47 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
				is_female = yes
                portrait_era1_trigger = yes 				
			}
		}
	}

	eastern_turk_imperial_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_imperial
				range = { 0 0.41 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
				is_female = yes
                portrait_era1_trigger = yes 				
			}
		}
	}
	
	########Non Persianized	
	
	eastern_turk_commoners_non_muslim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_common
				range = { 0 0.36 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_commoner_headgear_fallback_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 				
			}
		}
	}

	eastern_turk_low_nobles_non_muslim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_low_nobility
				range = { 0 0.36 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_eastern_turk } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}					
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes 			
			}
		}
	}

	eastern_turk_high_nobles_non_muslim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_high_nobility
				range = { 0 0.25 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}					
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes				
			}
		}
	}

	eastern_turk_royalty_non_muslim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_royalty
				range = { 0 0.47 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}					
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }  				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk
                }
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}					
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes 				
			}
		}
	}

	eastern_turk_imperial_non_muslim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_imperial
				range = { 0 0.41 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_eastern_turk_muslim
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes			
			}
		}
	}
	
	########Persianized	
	
	eastern_turk_commoners_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_common
				range = { 0.38 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }
				portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }				
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }
				portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }					
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 				
			}
		}
	}

	eastern_turk_low_nobles_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_low_nobility
				range = { 0.39 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_eastern_turk_muslim } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk_muslim 
                }
				portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }					
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_eastern_turk_muslim 
                }
				portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }				
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_low_nobles_clothing_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes			
			}
		}
	}

	eastern_turk_high_nobles_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_high_nobility
				range = { 0.28 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }
				portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }
				portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }				
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_high_nobles_headgear_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes			
			}
		}
	}

	eastern_turk_royalty_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_royalty
				range = { 0.50 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }
				portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }  				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim
                }
				portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }				
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes 				
			}
		}
	}

	eastern_turk_imperial_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_imperial
				range = { 0.44 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim 
                }
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk_muslim 
                }
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_eastern_turk 
                }				
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_seljuk
                    }
				}
				NOT = {
					portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_uyghur
                    }
				}				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes			
			}
		}
	}	
		
####################################################################################################
##################
###Seljuk Turk
##################
####################################################################################################

	seljuk_turk_commoners_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_common
				range = { 0 0.36 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 				
			}
		}
	}

	seljuk_turk_low_nobles_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_low_nobility
				range = { 0 0.36 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_seljuk } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_seljuk 
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_seljuk 
                }
                portrait_era1_trigger = yes 
				is_female = yes				
			}
		}
	}

	seljuk_turk_high_nobles_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_high_nobility
				range = { 0 0.25 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 
				is_female = yes				
			}
		}
	}

	seljuk_turk_royalty_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_royalty
				range = { 0 0.47 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
                portrait_era1_trigger = yes 	
				is_female = yes			
			}
		}
	}

	seljuk_turk_imperial_era1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_imperial
				range = { 0 0.41 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_seljuk 
                }
                portrait_era1_trigger = yes 				
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_seljuk 
                }
                portrait_era1_trigger = yes 	
				is_female = yes			
			}
		}
	}

	########Persianized	
	
	seljuk_turk_commoners_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_common
				range = { 0.38 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 				
			}
		}
	}

	seljuk_turk_low_nobles_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_low_nobility
				range = { 0.39 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_seljuk } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_seljuk 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_seljuk 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes 			
			}
		}
	}

	seljuk_turk_high_nobles_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_high_nobility
				range = { 0.28 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 
				is_female = yes				
			}
		}
	}

	seljuk_turk_royalty_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_royalty
				range = { 0.50 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }  				
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_seljuk
                }
				
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes  				
			}
		}
	}

	seljuk_turk_imperial_persianized = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp3_turkic_imperial
				range = { 0.44 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_seljuk 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                } 			
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_seljuk 
                }			
                OR = {
                    portrait_era2_trigger = yes  				
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
                }
				is_female = yes 			
			}
		}
	}

	####################################################################################################
	##################
	###Uyghur
	##################
	####################################################################################################

	uyghur_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_common
				range = { 0.64 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_uyghur
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_uyghur 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_uyghur
                }
				
			}
		}
	}

	uyghur_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_low_nobility
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_uyghur
				}				
			}
		}
	}

	uyghur_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_low_nobility
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_uyghur } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_uyghur
                }				
			}
		}
	}

	uyghur_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_high_nobility
				range = { 0.34 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_uyghur
                }
				
			}
		}
	}

	uyghur_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_royalty
				range = { 0.61 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_uyghur
                }
				
			}
		}
	}
	
	uyghur_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_imperial
				range = { 0.61 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_uyghur 
                }
			
			}
		}
	}



	####################################################################################################
	##################
	###Han Chinese
	##################
	####################################################################################################

	han_chinese_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_common
				range = { 0.61 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_han_chinese
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = epe_han_chinese 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_han_chinese
                }				
			}
		}
	}

	han_chinese_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_low_nobility
				range = { 0 0.48 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = epe_han_chinese
				}				
			}
		}
	}

	han_chinese_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_low_nobility
				range = { 0 0.48 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_han_chinese } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_han_chinese
                }				
			}
		}
	}

	han_chinese_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_high_nobility
				range = { 0 0.31 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_han_chinese
                }
				
			}
		}
	}

	han_chinese_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_royalty
				range = { 0 0.58 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_han_chinese
                }
				
			}
		}
	}
	
	han_chinese_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = han_chinese_imperial
				range = { 0 0.58 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_han_chinese 
                }		
			}
		}
	}
	
	


####################################################################################################
##################
###Eastern Slav/The Rus' 
##################
####################################################################################################

	east_slav_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_common
				range = { 0 0.29 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_east_slav
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_east_slav
                }
			}
		}
	}

	east_slav_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_low_nobility
				range = { 0 0.23 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_east_slav } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_east_slav 
                }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_east_slav 
                }
				is_female = yes 
			}
		}
	}

	east_slav_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_high_nobility
				range = { 0 0.31 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_east_slav
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_east_slav
                }
				is_female = yes    
			}
		}
	}

	east_slav_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_royalty
				range = { 0 0.14 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_east_slav
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_east_slav
                } 
				is_female = yes   
			}
		}
	}

	east_slav_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_imperial
				range = { 0 0.20 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_east_slav 
                }
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_east_slav 
                }
				is_female = yes 
			}
		}
	}	
		



####################################################################################################
##################
###Western Slav
##################
####################################################################################################




####################################################################################################
##################
###English/Anglo-Saxon
##################
####################################################################################################


    ep2_english_era1_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = northern_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_english
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_english
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era1_trigger = yes     
            }
        }
    }


	ep2_english_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
                template = northern_common
                range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_english
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}

	ep2_english_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_northern_high ###is the same as the original northern high noble headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes
			}
		}
	}


	ep2_english_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes
			}
		}
	}



	ep2_english_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_english 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes 
				is_female = yes 
			}
		}
	}

####################################################################################################
##################
###Brythonic/Welsh
##################
####################################################################################################


    ep2_brythonic_era1_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = fp1_common
                range = { 0.37 0.65 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_brythonic 
				}
				has_ep2_dlc_trigger = yes 
                OR = {
                    portrait_era1_trigger = yes
                    portrait_era2_trigger = yes
                } 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_brythonic 
                } 
                has_ep2_dlc_trigger = yes   
                OR = {
                    portrait_era1_trigger = yes
                    portrait_era2_trigger = yes
                }    
            }
        }
    }


	ep2_brythonic_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
                template = northern_common
                range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_brythonic 
				}
				has_ep2_dlc_trigger = yes 
                OR = {
                    portrait_era1_trigger = yes
                    portrait_era2_trigger = yes
                } 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_brythonic  
                }
                has_ep2_dlc_trigger = yes
                OR = {
                    portrait_era1_trigger = yes
                    portrait_era2_trigger = yes
                } 
			}
		}
	}

	ep2_brythonic_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_northern_high ###is the same as the original northern high noble headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic  
                }
                has_ep2_dlc_trigger = yes
                OR = {
                    portrait_era1_trigger = yes
                    portrait_era2_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_brythonic  
                }
                has_ep2_dlc_trigger = yes
                OR = {
                    portrait_era1_trigger = yes
                    portrait_era2_trigger = yes
                }   
				is_female = yes
			}
		}
	}


	ep2_brythonic_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_brythonic  
                }
                has_ep2_dlc_trigger = yes
                OR = {
                    portrait_era1_trigger = yes
                    portrait_era2_trigger = yes
                } 
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_brythonic  
                }
                has_ep2_dlc_trigger = yes
                OR = {
                    portrait_era1_trigger = yes
                    portrait_era2_trigger = yes
                } 
				is_female = yes
			}
		}
	}



	ep2_brythonic_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era1_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_brythonic  
                }
                has_ep2_dlc_trigger = yes
                OR = {
                    portrait_era1_trigger = yes
                    portrait_era2_trigger = yes
                } 
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_brythonic  
                }
                has_ep2_dlc_trigger = yes
                OR = {
                    portrait_era1_trigger = yes
                    portrait_era2_trigger = yes
                } 
				is_female = yes 
			}
		}
	}
	
	ep2_brythonic_era3_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_brythonic 
                }				
                has_ep2_dlc_trigger = yes
                portrait_era3_trigger = yes  				
			}
		}
	}


####################################################################################################
##################
###Gaelic/Irish
##################
####################################################################################################

	gaelic_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_common
				range = { 0.68 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_gaelic
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_gaelic
                }
			}
		}
	}

	gaelic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_low_nobility
				range = { 0.63 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_gaelic } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_gaelic 
                }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_gaelic 
                }
				is_female = yes 
			}
		}
	}

	gaelic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_nobility
				range = { 0.77 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_gaelic
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_gaelic
                }
				is_female = yes    
			}
		}
	}

	gaelic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_royalty
				range = { 0.61 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_gaelic
                }   
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_gaelic
                } 
				is_female = yes   
			}
		}
	}

	gaelic_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_imperial
				range = { 0.84 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_gaelic 
                }
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_gaelic 
                }
				is_female = yes 
			}
		}
	}	
		
####################################################################################################
##################
###Balto-Finnic
##################
####################################################################################################


	balto_finnic_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_common
				range = { 0.76 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
			}
		}
	}

	balto_finnic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_low_nobility
				range = { 0.76 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_balto_finnic } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_balto_finnic 
                }
				has_fp1_dlc_trigger = yes
			}
		}
	}

	balto_finnic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_high_nobility
				range = { 0.55 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
				is_female = yes
			}
		}
	}

	balto_finnic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_royalty
				range = { 0.58 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
			}
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
				has_fp1_dlc_trigger = yes
				is_female = yes
			}
		}
	}

	balto_finnic_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_imperial
				range = { 0.64 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_balto_finnic 
                }
				has_fp1_dlc_trigger = yes
			}
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_balto_finnic 
                }
				has_fp1_dlc_trigger = yes
				is_female = yes
			}
		}
	}	
	
####non DLC Balto-Finnic

	non_dlc_balto_finnic_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }				
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }
			}
		}
	}

	non_dlc_balto_finnic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = epe_balto_finnic } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_balto_finnic 
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }
			}
		}
	}

	non_dlc_balto_finnic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }
			}
		}
	}

	non_dlc_balto_finnic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly Higher
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_balto_finnic
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }
			}
		}
	}

	non_dlc_balto_finnic_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100 # Should be picked over other ranked headgear
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_balto_finnic 
                }
                NOT = {
					has_fp1_dlc_trigger = yes
                }
			}
		}
	}	


####################################################################################################
##################
###North africa/maghreb
##################
####################################################################################################

####################################################################################################
##################
###Baranis - settled/Coastal Berber
##################
####################################################################################################

	baranis_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_common
				range = { 0.48 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = afr_berber 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
			}
		}
	}

	baranis_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_low_nobility
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = afr_berber
				}
                portrait_mayor_headgear_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
			}
		}
	}

	baranis_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_low_nobility
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = afr_berber } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
				is_female = yes				
			}
		}
	}

	baranis_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_high_nobility
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes
				is_female = yes 
			}
		}
	}

	baranis_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_royalty
				range = { 0 0.48 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes
				is_female = yes 
			}
		}
	}
	
	baranis_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_imperial
				range = { 0 0.48 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = afr_berber 
                }
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
				has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = afr_berber 
                }
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_baranis 
                }				
	            has_afr_dlc_trigger = yes				
				is_female = yes 
			}
		}
	}
	
####################################################################################################
##################
###Butr/zaghawa - nomadic Berber
##################
####################################################################################################

	butr_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_common
				range = { 0 0.46 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = afr_berber 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
			}
		}
	}

	butr_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_low_nobility
				range = { 0 0.48 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = afr_berber
				}
                portrait_mayor_headgear_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
			}
		}
	}

	butr_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_low_nobility
				range = { 0 0.48 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = afr_berber } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
				is_female = yes				
			}
		}
	}

	butr_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_high_nobility
				range = { 0 0.49 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes
				is_female = yes 
			}
		}
	}

	butr_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_royalty
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = afr_berber
                }
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes
				is_female = yes 
			}
		}
	}
	
	butr_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = afr_imperial
				range = { 0.51 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = afr_berber 
                }
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
				has_afr_dlc_trigger = yes
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = afr_berber 
                }
                portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_butr 
                }				
	            has_afr_dlc_trigger = yes				
				is_female = yes 
			}
		}
	}	
	
	##########################################################################
	#### North africa Non-dlc
	##########################################################################

	maghreb_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
                portrait_commoner_headgear_fallback_trigger = {
                    CULTURE_INPUT = non_dlc_afr_berber
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
			modifier = { # Non-european jesters should not use the jester hat
				add = 1000
                portrait_jester_trigger = {  
                    CULTURE_INPUT = non_dlc_afr_berber 
                }
			}
			modifier = {
				add = 20
                portrait_commoner_clothing_trigger = {
                    CULTURE_INPUT = non_dlc_afr_berber
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
		}
	}

	maghreb_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				portrait_mayor_headgear_trigger = {
					CULTURE_INPUT = non_dlc_afr_berber
				}
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
		}
	}

	maghreb_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			court_fashion_level_4_headgear_modifier = { INPUT_PARAMETER = non_dlc_afr_berber } 
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = non_dlc_afr_berber
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {
                    CULTURE_INPUT = non_dlc_afr_berber
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
				is_female = yes				
			}
		}
	}

	non_dlc_maghreb_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = non_dlc_afr_berber
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = non_dlc_afr_berber
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}

	non_dlc_maghreb_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = non_dlc_afr_berber
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = non_dlc_afr_berber
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}
	
	non_dlc_maghreb_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = non_dlc_afr_berber 
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }				
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {
                    CULTURE_INPUT = non_dlc_afr_berber 
                }
                NOT = {
	                has_afr_dlc_trigger = yes				
                }
				is_female = yes				
			}
		}
	}	
	
	
####################################################################################################
##################
###Western Slav
##################
####################################################################################################


###Western Slav era 1

    ep2_west_slav_era1_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = east_slav_common
                range = { 0.32 0.73 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era1_trigger = yes     
            }
        }
    }

	ep2_west_slav_era1_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_low_nobility
				range = { 0.26 0.73 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
				portrait_era1_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
		}
	}


	ep2_west_slav_era1_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_high_nobility
				range = { 0.34 0.53 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes
			}
		}
	}


	ep2_west_slav_era1_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_royalty
				range = { 0.16 0.55 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
				is_female = yes
			}
		}
	}
	
	
	ep2_west_slav_era1_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_slav_imperial
				range = { 0.28 0.61 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                portrait_era1_trigger = yes 
				is_female = yes 
			}
		}
	}






###Western Slav EP2 tours & tournaments
	ep2_west_slav_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_common
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 20
				portrait_commoner_clothing_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}



    ep2_west_slav_era2_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = western_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
				portrait_era2_trigger = yes 
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                } 
                has_ep2_dlc_trigger = yes   
                portrait_era2_trigger = yes 
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
            }
        }
    }

    ep2_west_slav_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = ep2_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                } 
                has_ep2_dlc_trigger = yes 
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }    
            }
        }
    }
	
    fp4_west_slav_era3_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = fp4_western_era3_common
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_religious_christian_trigger = yes
				}  
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                } 
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
				NOT = {
					portrait_religious_christian_trigger = yes
				}     
            }
        }
    }	

	ep2_west_slav_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}



	ep2_west_slav_era2_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
                NOT = {
                    has_pol_dlc_trigger = yes
                }			
				portrait_era2_trigger = yes 
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }			
                portrait_era2_trigger = yes  
			}
		}
	}

	ep2_west_slav_era3_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep2_western_era3_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
				portrait_era3_trigger = yes 
			}
			modifier = {
				add = 50
				portrait_low_nobles_clothing_trigger = {  
					CULTURE_INPUT = epe_west_slav 
				}
				has_ep2_dlc_trigger = yes
				OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
				}
			}
			modifier = {
				add = 50
				portrait_low_nobles_clothing_trigger = {  
					CULTURE_INPUT = epe_west_slav 
				}
				has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
				OR = {
					portrait_era3_trigger = yes  
					portrait_era4_trigger = yes  
				}
				is_female = yes
			}
		}
	}

	ep2_west_slav_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }				
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}



	ep2_west_slav_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }					
                portrait_era2_trigger = yes  
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }					
                portrait_era2_trigger = yes  
				is_female = yes
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
			}
		}
	}
	
	ep2_west_slav_era3_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
                OR = {
					portrait_era3_trigger = yes  
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
                AND = {
                    is_independent_ruler = no    
                    prestige_level <= 4
                 }
                AND = {
                    is_independent_ruler = yes    
                    prestige_level <= 3
                 } 				
                }			
                OR = {
					portrait_era3_trigger = yes  
                }
				is_female = yes
			}
		}
	}
	
	
	ep2_west_slav_era4_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era4_trigger = yes  
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era4_trigger = yes  
                }
				is_female = yes
			}
		}
	}	

	ep2_west_slav_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
                NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}


	ep2_west_slav_era2_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                portrait_era2_trigger = yes  
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                portrait_era2_trigger = yes  
				is_female = yes
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
			}
		}
	}

	ep2_west_slav_era3_high_nobles_independent = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility_independent
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}			
                OR = {
					portrait_era3_trigger = yes  
                }
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
				OR = {
					AND = {
						is_independent_ruler = yes
						prestige_level >= 3       
					}
					prestige_level >= 4        
				}		
                OR = {
					portrait_era3_trigger = yes  
                }
				is_female = yes
			}
		}
	}

	ep2_west_slav_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_west_slav 
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
		}
	}

	ep1_west_slav_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_royalty_trigger = {
					CULTURE_INPUT = epe_west_slav 
				}
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
			}
			modifier = {
				factor = 0
				NOT = {
					has_ep1_dlc_trigger = yes
				}
			}
            modifier = {
                factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
                has_ep2_dlc_trigger = yes 
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                NOT = {
					portrait_era2_trigger = yes  
                }  
            }
		}
	}



	ep2_west_slav_era2_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }			
                portrait_era2_trigger = yes  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                portrait_era2_trigger = yes  
				is_female = yes
			}
		}
	}

	ep2_west_slav_era3_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_era3_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }
				is_female = yes  
			}
		}
	}
	
	ep2_west_slav_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = epe_west_slav 
				}
				NOT = { has_ep2_dlc_trigger = yes }
			}
			modifier = {
				add = 50
				portrait_imperial_trigger = {
					CULTURE_INPUT = epe_west_slav 
				}
				NOT = { has_ep2_dlc_trigger = yes }
				is_female = yes
			}
		}
	}




	ep2_west_slav_era2_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era2_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era2_trigger = yes
                }
				is_female = yes  
			}
		}
	}

	ep2_west_slav_era4_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }  
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                NOT = {
                    has_pol_dlc_trigger = yes
                }				
                OR = {
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes
                }
				is_female = yes  
			}
		}
	}
	
	
###Western Slav POL

    ep2_pol_west_slavic_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
				template = pol_common
				range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
			modifier = {
				add = 80
				portrait_commoner_headgear_fallback_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes 
                has_pol_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes					
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes					
                }
			}
            modifier = {
                add = 20
                portrait_commoner_clothing_trigger = { 
                    CULTURE_INPUT = epe_west_slav
                } 
                has_ep2_dlc_trigger = yes
                has_pol_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes					
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes					
                }         
            }
        }
    }



	ep2_pol_west_slavic_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pol_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				court_fashion_level_4_headgear_trigger = {
					CULTURE_INPUT = epe_west_slav
				}
				has_ep2_dlc_trigger = yes
                has_pol_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes					
                }
			}
			modifier = {
				add = 50
                portrait_low_nobles_clothing_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                has_pol_dlc_trigger = yes				
                OR = {
					portrait_era1_trigger = yes				
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes					
                }
			}
		}
	}


	ep2_pol_west_slavic_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pol_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                has_pol_dlc_trigger = yes				
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes					
                } 
			}
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                has_pol_dlc_trigger = yes				
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes				
                } 
				is_female = yes
			}
		}
	}
	
	
	ep2_pol_west_slavic_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pol_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                has_pol_dlc_trigger = yes				
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes	
                }
			}
			modifier = {
				add = 50
                portrait_royalty_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                has_pol_dlc_trigger = yes				
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes	
                }
				is_female = yes
			}
		}
	}


	ep2_pol_west_slavic_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pol_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}

		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                has_pol_dlc_trigger = yes				
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes	
                }
			}
			modifier = {
				add = 50
                portrait_imperial_trigger = {  
                    CULTURE_INPUT = epe_west_slav 
                }
                has_ep2_dlc_trigger = yes
                has_pol_dlc_trigger = yes				
                OR = {
					portrait_era2_trigger = yes
					portrait_era3_trigger = yes				
					portrait_era4_trigger = yes	
                }
				is_female = yes 
			}
		}
	}	









	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
		
	
	
	
	
	
	
	
	
	
	
	
	
	


####################################################################################################
##################
### Roman
##################
####################################################################################################

	roman_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_crown_titles
				accessory = male_roman_emperor_wreath_01	
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000 # always pick the laurel wreath over cultural imperial headwear.
				culture = {
					has_cultural_pillar = heritage_latin
				}
				portrait_epe_roman_imperial_trigger = yes
			}
		}
	}
	
####################################################################################################
##################
### Iron Crown of Lombardy
##################
####################################################################################################

	italian_crown_of_lombardy = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ep1_crown_of_lombardy
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 500 # always pick the Crown of Lombardy over royal headwear.
				culture = {
					has_cultural_pillar = heritage_latin
				}
				portrait_epe_crown_of_lombardy_trigger = yes
				has_ep1_dlc_trigger = yes
			}
		}
	}


	### Croatia Kingdom titles	 ###
	croatian_title_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_crown_titles
				accessory = male_crown_of_zvonimir_01	
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_crown_of_zvonimir_trigger = yes
			}
			modifier = {
				add = 100
				portrait_crown_of_zvonimir_trigger = yes
				is_female = yes
			}
		}
	}

		### Sicilian Kingdom titles	 ###
		sicily_title_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_crown_titles
				accessory = m_crown_of_roger_II_01	
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
			weight = {
				base = 0
				modifier = {
					add = 100
					portrait_crown_of_sicily_trigger = yes
				}
				modifier = {
					add = 100
					portrait_crown_of_sicily_trigger = yes
					is_female = yes
				}
			}
		}

	#Holy Crown of Hungary Late and Early
	
	hungarian_title_royalty_early = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_crown_titles
				accessory = male_epe_holy_crown_of_hungary_01e	
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_hch_trigger = yes
				has_ep2_dlc_trigger = yes
                OR = {
					portrait_era1_trigger = yes
					portrait_era2_trigger = yes
                }
			}
			modifier = {
				add = 100
				portrait_hch_trigger = yes
				has_ep2_dlc_trigger = yes
                OR = {
					portrait_era1_trigger = yes
					portrait_era2_trigger = yes
                }
				is_female = yes
			}
			
		}
	}	
	
	hungarian_title_royalty_late = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_crown_titles
				accessory = male_epe_holy_crown_of_hungary_01	
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_hch_trigger = yes
				has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }
			}
			modifier = {
				add = 100
				portrait_hch_trigger = yes
				has_ep2_dlc_trigger = yes
                OR = {
					portrait_era3_trigger = yes
					portrait_era4_trigger = yes
                }
				is_female = yes
			}
			
		}
	}
	
	
	
####################################################################################################
##################
###Norman-Sicilian era 2-4
##################
####################################################################################################

	epe_norman_sicilian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_norman_sicily
                }   
			}
            modifier = {
                factor = 0 
                has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes   
            }
		}
	}


	ep3_epe_norman_sicilian_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = norman_sicilian_high_nobility 
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_norman_sicily
                }   
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_norman_sicilian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_norman_sicily
                }   
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
            }
		}
	}


    ep3_epe_norman_sicilian_era2_royalty = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = norman_sicilian_royalty
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_norman_sicily
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }

	epe_norman_sicilian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_norman_sicily 
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
            }
		}
	}



    ep3_epe_norman_sicilian_era2_imperial = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = norman_sicilian_imperial
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_norman_sicily
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }




####################################################################################################
##################
###Sicilian era 2-4
##################
####################################################################################################

	epe_sicilian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_sicilian
                }   
			}
            modifier = {
                factor = 0 
                has_ep3_dlc_trigger = yes 
                portrait_era1_trigger = yes   
            }
		}
	}


	ep3_epe_sicilian_era2_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = norman_sicilian_high_nobility 
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_high_nobles_headgear_trigger = {
                    CULTURE_INPUT = epe_sicilian
                }   
		        has_ep3_dlc_trigger = yes 
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }  
			}
		}
	}

	epe_sicilian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
                portrait_royalty_trigger = {
                    CULTURE_INPUT = epe_sicilian
                }   
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
            }
		}
	}


    ep3_epe_sicilian_era2_royalty = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = norman_sicilian_royalty
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_royalty_trigger = { 
                    CULTURE_INPUT = epe_sicilian
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }

	epe_sicilian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_imperial_trigger = {
                    CULTURE_INPUT = epe_sicilian 
                }
			}
            modifier = {
                factor = 0     
                has_ep3_dlc_trigger = yes 
            }
		}
	}



    ep3_epe_sicilian_era2_imperial = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = norman_sicilian_imperial
                range = { 0 1 } # For the randomness to work correctly
            }
            accessory = {
                mode = add
                gene = headgear_2
                template = no_headgear
                range = { 0 1 }
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 85
                portrait_imperial_trigger = { 
                    CULTURE_INPUT = epe_sicilian
                }                
                has_ep3_dlc_trigger = yes   
                OR = {
                    portrait_era2_trigger = yes  
                    portrait_era3_trigger = yes  
                    portrait_era4_trigger = yes  
                }     
            }
        }
    }	
	
	




	####Western Spymaster
	western_spymaster_headgear = {
		# outfit_tags = { rank_headgear } 
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_spymaster_headgears
				accessory = male_epe_western_spy_master_hood				
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 200
				age > 17
				exists = this
				OR = {
					AND = {
						has_council_position = councillor_spymaster
						highest_held_title_tier < tier_county
						is_clergy = no
					}
				}
				NOT = {
					portrait_wear_armor_trigger = yes
					OR = {
						has_government = theocracy_government
						has_court_position = court_physician_court_position
					}
				}				
				OR = {
					portrait_byzantine_clothing_trigger = yes
					portrait_western_clothing_trigger = yes
					portrait_epe_english_clothing_trigger = yes
					portrait_epe_gaelic_clothing_trigger = yes
					portrait_epe_georgian_clothing_trigger = yes
					portrait_epe_bulgarian_clothing_trigger = yes
					portrait_epe_armenian_clothing_trigger = yes
					portrait_epe_south_slav_clothing_trigger = yes
				}
			}
		}
	}

	####MENA Spymaster
	mena_spymaster_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_spymaster_headgears
				accessory = male_headgear_epe_mena_spy_master_01	
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 200
				age > 17
				exists = this
				OR = {
					AND = {
						has_council_position = councillor_spymaster
						highest_held_title_tier < tier_county
						is_clergy = no						
					}
				}
				NOT = {
					portrait_wear_armor_trigger = yes
					OR = {
						has_government = theocracy_government
					}
				}				
				OR = {
					portrait_mena_clothing_trigger = yes
					portrait_dde_abbasid_clothing_trigger = yes	
					portrait_epe_bedouin_clothing_trigger = yes						
				}
				NOT = {
					portrait_epe_seljuk_clothing_trigger = yes
				}
				NOT = {
					portrait_fp3_iranian_clothing_trigger = yes
				}				
			}
		}
	}
	
	####Northern Spymaster
	northern_spymaster_headgear = {
		# outfit_tags = { rank_headgear } 
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_spymaster_headgears
				accessory = male_headgear_epe_northern_spymaster_headband_01				
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 200
				age > 17
				exists = this
				OR = {
					AND = {
						has_council_position = councillor_spymaster
						highest_held_title_tier < tier_county
						is_clergy = no
					}
				}
				NOT = {
					portrait_wear_armor_trigger = yes
					OR = {
						has_government = theocracy_government
						has_court_position = court_physician_court_position
					}
				}				
				OR = {
					portrait_northern_clothing_trigger = yes
					portrait_fp1_norse_clothing_trigger = yes
					portrait_epe_east_slav_clothing_trigger = yes	
					portrait_epe_balto_finnic_clothing_trigger = yes		
					portrait_epe_gaelic_clothing_trigger = yes	
				}
			}
		}
	}	
	
	####Persian Spymaster
	persian_spymaster_headgear = {
		# outfit_tags = { rank_headgear } 
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = epe_spymaster_headgears
				accessory = male_headgear_epe_persian_spymaster_01				
			}
			accessory = {
			    mode = add
			    gene = headgear_2
			    template = no_headgear
			    range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 200
				age > 17
				exists = this
				OR = {
					AND = {
						has_council_position = councillor_spymaster
						highest_held_title_tier < tier_county
						is_clergy = no
					}
				}
				NOT = {
					portrait_wear_armor_trigger = yes
					OR = {
						has_government = theocracy_government
						has_court_position = court_physician_court_position
					}
				}				
				OR = {
					portrait_fp3_iranian_clothing_trigger = yes
					portrait_epe_seljuk_clothing_trigger = yes
					AND = {
					  portrait_epe_eastern_turk_clothing_trigger = yes
					  portrait_epe_eastern_turk_muslim_clothing_trigger = yes
					}
					
				}
			}
		}
	}	
	
	
	
}
